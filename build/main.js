const e={Dn:function(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(t),i=new Uint8Array(a.length);for(let e=0;e<a.length;++e)i[e]=a.charCodeAt(e);return i}},t={et:()=>{const e=e=>{const t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t};return e()+e(!0)+e(!0)+e()}};class a{constructor(e,t){this.td="undefined"==typeof window?self:window,this.ed=e,this.nd=t}od(){if("indexedDB"in this.td)return this.td.indexedDB}rd(){try{if(null==this.od())return!1;if(this.od().open("Braze IndexedDB Support Test"),"undefined"!=typeof window){const e=window.chrome||window.browser||window.msBrowser;if(e&&e.runtime&&e.runtime.id)return this.nd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}catch(e){return this.nd.info("Not using IndexedDB for storage due to following error: "+e),!1}}dd(e,t){const a=this.od().open(this.ed.sd,this.ed.VERSION);if(null==a)return"function"==typeof t&&t(),!1;const i=this;return a.onupgradeneeded=e=>{i.nd.info("Upgrading indexedDB "+i.ed.sd+" to v"+i.ed.VERSION+"...");const t=e.target.result;for(const e in i.ed.Pt)i.ed.Pt.hasOwnProperty(e)&&!t.objectStoreNames.contains(i.ed.Pt[e])&&t.createObjectStore(i.ed.Pt[e])},a.onsuccess=a=>{const s=a.target.result;s.onversionchange=()=>{s.close(),"function"==typeof t&&t(),i.nd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},e(s)},a.onerror=e=>(i.nd.info("Could not open indexedDB "+i.ed.sd+" v"+i.ed.VERSION+": "+e.target.errorCode),"function"==typeof t&&t(),!0),!0}setItem(e,t,a,i,s){if(!this.rd())return"function"==typeof s&&s(),!1;const n=this;return this.dd((r=>{if(!r.objectStoreNames.contains(e))return n.nd.error("Could not store object "+t+" in "+e+" on indexedDB "+n.ed.sd+" - "+e+" is not a valid objectStore"),void("function"==typeof s&&s());const o=r.transaction([e],"readwrite").objectStore(e).put(a,t);o.onerror=()=>{n.nd.error("Could not store object "+t+" in "+e+" on indexedDB "+n.ed.sd),"function"==typeof s&&s()},o.onsuccess=()=>{"function"==typeof i&&i()}}),s)}getItem(e,t,a){if(!this.rd())return!1;const i=this;return this.dd((s=>{if(!s.objectStoreNames.contains(e))return void i.nd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+i.ed.sd+" - "+e+" is not a valid objectStore");const n=s.transaction([e],"readonly").objectStore(e).get(t);n.onerror=()=>{i.nd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+i.ed.sd)},n.onsuccess=e=>{const t=e.target.result;null!=t&&a(t)}}))}hr(e,t,a){if(!this.rd())return"function"==typeof a&&a(),!1;const i=this;return this.dd((s=>{if(!s.objectStoreNames.contains(e))return i.nd.error("Could not retrieve last record from "+e+" on indexedDB "+i.ed.sd+" - "+e+" is not a valid objectStore"),void("function"==typeof a&&a());const n=s.transaction([e],"readonly").objectStore(e).openCursor(null,"prev");n.onerror=()=>{i.nd.error("Could not open cursor for "+e+" on indexedDB "+i.ed.sd),"function"==typeof a&&a()},n.onsuccess=e=>{const i=e.target.result;null!=i&&null!=i.value&&null!=i.key?t(i.key,i.value):"function"==typeof a&&a()}}),a)}br(e,t){if(!this.rd())return!1;const a=this;return this.dd((i=>{i.objectStoreNames.contains(e)?i.transaction([e],"readwrite").objectStore(e).delete(t).onerror=()=>{a.nd.error("Could not delete record "+t+" from "+e+" on indexedDB "+a.ed.sd)}:a.nd.error("Could not delete record "+t+" from "+e+" on indexedDB "+a.ed.sd+" - "+e+" is not a valid objectStore")}))}Jt(e,t){if(!this.rd())return!1;const a=this;return this.dd((i=>{if(!i.objectStoreNames.contains(e))return void a.nd.error("Could not retrieve objects from "+e+" on indexedDB "+a.ed.sd+" - "+e+" is not a valid objectStore");const s=i.transaction([e],"readwrite").objectStore(e),n=s.openCursor(),r=[];n.onerror=()=>{r.length>0?(a.nd.info("Cursor closed midway through for "+e+" on indexedDB "+a.ed.sd),t(r)):a.nd.error("Could not open cursor for "+e+" on indexedDB "+a.ed.sd)},n.onsuccess=e=>{const a=e.target.result;null!=a?(null!=a.value&&null!=a.key&&(s.delete(a.key).onsuccess=()=>{r.push(a.value)}),a.continue()):r.length>0&&t(r)}}))}clearData(){if(!this.rd())return!1;const e=[];for(const t in this.ed.Pt)this.ed.Pt.hasOwnProperty(t)&&this.ed.Pt[t]!==this.ed.Pt.oe&&e.push(this.ed.Pt[t]);const t=this;return this.dd((function(a){const i=a.transaction(e,"readwrite");for(let a=0;a<e.length;a++){const s=e[a];i.objectStore(s).clear().onerror=function(){t.nd.error("Could not clear "+this.source.name+" on indexedDB "+t.ed.sd)}}i.onerror=function(){t.nd.error("Could not clear object stores on indexedDB "+t.ed.sd)}}))}}a.ep={xt:{sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,Pt:{jl:"data",jr:"pushClicks",Nr:"pushSubscribed",ud:"fallbackDevice",Mt:"cardUpdates",oe:"optOut",$r:"pendingData",Kn:"sdkAuthenticationSignature"},se:1}};const i={init:function(e){void 0===e&&void 0!==i.zg||(i.zg=!!e),i.Dg||(i.Dg=!0)},destroy:function(){i.Dg=!1,i.zg=void 0,i.nd=void 0},setLogger:function(e){"function"==typeof e?(i.init(),i.nd=e):i.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){i.init(),i.zg?(console.log("Disabling Braze logging"),i.zg=!1):(console.log("Enabled Braze logging"),i.zg=!0)},info:function(e){if(i.zg){const t="Braze: "+e;null!=i.nd?i.nd(t):console.log(t)}},warn:function(e){if(i.zg){const t="Braze SDK Warning: "+e+" (v4.0.5)";null!=i.nd?i.nd(t):console.warn(t)}},error:function(e){if(i.zg){const t="Braze SDK Error: "+e+" (v4.0.5)";null!=i.nd?i.nd(t):console.error(t)}}};const s={_n:e,A:{CustomEvent:"ce",Pr:"p",Sl:"pc",oc:"ca",Ra:"i",ha:"ie",T:"cci",W:"ccic",_:"ccc",L:"ccd",Wh:"ss",bh:"se",Pe:"si",qe:"sc",Oe:"sbc",Ne:"sfe",ro:"iec",vl:"lr",yl:"uae",U:"ci",F:"cc",Al:"lcaa",$l:"lcar",Xr:"inc",Yr:"add",Qr:"rem",Wr:"set",Cl:"sgu"},qr:{Fr:"feed_displayed",cc:"content_cards_displayed"},nt:t,qt:a,Ft:a.ep,D:i,Uo:{Vn:"allowCrawlerActivity",$n:"baseUrl",Yn:"noCookies",Xn:"devicePropertyAllowlist",ra:"disablePushTokenMaintenance",Zn:"enableLogging",ho:"enableSdkAuthentication",ta:"manageServiceWorkerExternally",po:"minimumIntervalBetweenTriggerActionsInSeconds",Eo:"sessionTimeoutInSeconds",_o:"appVersion",ea:"serviceWorkerLocation",na:"safariWebsitePushId",zn:"localization",ao:"contentSecurityNonce",Io:"enableHtmlInAppMessages",Ao:"allowUserSuppliedJavascript",no:"inAppMessageZIndex",lo:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",Ri:"requireExplicitInAppMessageDismissal",So:"doNotLoadFontAwesome",No:"sdkFlavor",tn:"openCardsInNewTab"}};function n(e){const t=[];for(let a in e)e.hasOwnProperty(a)&&void 0!==e[a]&&t.push(e[a]);return t}function r(e,t,a,i){const r=n(e);return-1!==r.indexOf(t)||(s.D.error(`${a} Valid values from ${i} are "${r.join('"/"')}".`),!1)}function o(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function l(e){return"[object Date]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){null==e&&(e=[]);const t=[],a=arguments.length;for(let i=0,s=e.length;i<s;i++){const s=e[i];if(-1!==t.indexOf(s))continue;let n=1;for(n=1;n<a&&-1!==arguments[n].indexOf(s);n++);n===a&&t.push(s)}return t}function h(e){const t=[];for(let a in e)e.hasOwnProperty(a)&&t.push(a);return t}function p(e,t){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;const a=e.toString();if(a!==t.toString())return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}const i="[object Array]"===a;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;const a=e.constructor,i=t.constructor;if(a!==i&&!("function"==typeof a&&a instanceof a&&"function"==typeof i&&i instanceof i)&&"constructor"in e&&"constructor"in t)return!1}const s=[],n=[];let r=s.length;for(;r--;)if(s[r]===e)return n[r]===t;if(s.push(e),n.push(t),i){if(r=e.length,r!==t.length)return!1;for(;r--;)if(!p(e[r],t[r]))return!1}else{let a,i=h(e);if(r=i.length,h(t).length!==r)return!1;for(;r--;)if(a=i[r],!t.hasOwnProperty(a)||!p(e[a],t[a]))return!1}return s.pop(),n.pop(),!0}function d(e,t){let a=e/1e3;return t&&(a=Math.floor(a)),a}function b(e){return 1e3*e}function m(e){const t=parseInt(e);return null==e||isNaN(t)?null:new Date(1e3*t)}function g(e){return null!=e&&l(e)?e.toISOString().replace(/\.[0-9]{3}Z$/,""):e}function f(e){return null==e||""===e?null:new Date(e)}function v(e){return((new Date).valueOf()-e.valueOf())/1e3}function w(e){return(e.valueOf()-(new Date).valueOf())/1e3}class x{constructor(){this.Xs={}}Et(e){if("function"!=typeof e)return null;const t=s.nt.et();return this.Xs[t]=e,t}removeSubscription(e){delete this.Xs[e]}removeAllSubscriptions(){this.Xs={}}Nt(e){const t=[];for(let a in this.Xs)t.push(this.Xs[a](e));return t}}class y{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m){this.id=e,this.viewed=t||!1,this.title=a||"",this.imageUrl=i,this.description=s||"",this.created=n||null,this.updated=r||null,this.categories=o||[],this.expiresAt=l||null,this.url=c,this.linkText=u,h=parseFloat(h),this.aspectRatio=isNaN(h)?null:h,this.extras=p,this.pinned=d||!1,this.dismissible=b||!1,this.dismissed=!1,this.clicked=m||!1,this.test=!1,this.lt=null,this.rt=null}subscribeToClickedEvent(e){return this.ut().Et(e)}subscribeToDismissedEvent(e){return this.Tt().Et(e)}removeSubscription(e){this.ut().removeSubscription(e),this.Tt().removeSubscription(e)}removeAllSubscriptions(){this.ut().removeAllSubscriptions(),this.Tt().removeAllSubscriptions()}dismissCard(){if(this.dismissible&&!this.dismissed){this.tt&&this.tt(this);var e=this.X;e&&(e.style.height=e.offsetHeight+"px",e.className=e.className+" ab-hide",setTimeout((function(){e&&e.parentNode&&(e.style.height="0",e.style.margin="0",setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),y.It))}),500))}}ut(){return null==this.lt&&(this.lt=new x),this.lt}Tt(){return null==this.rt&&(this.rt=new x),this.rt}R(){this.viewed=!0}k(){this.viewed=!0,this.clicked=!0,this.ut().Nt()}J(){return!(!this.dismissible||this.dismissed||(this.dismissed=!0,this.Tt().Nt(),0))}St(e){if(null==e||e[y.ct.ns]!==this.id)return!0;if(e[y.ct.At])return!1;if(null!=e[y.ct.us]&&null!=this.updated&&e[y.ct.us]<d(this.updated.valueOf()))return!0;if(e[y.ct.ls]&&!this.viewed&&(this.viewed=!0),e[y.ct.gs]&&!this.clicked&&(this.clicked=e[y.ct.gs]),null!=e[y.ct.it]&&(this.title=e[y.ct.it]),null!=e[y.ct.os]&&(this.imageUrl=e[y.ct.os]),null!=e[y.ct.ht]&&(this.description=e[y.ct.ht]),null!=e[y.ct.us]){const t=m(e[y.ct.us]);null!=t&&(this.updated=t)}if(null!=e[y.ct.ps]){let t;t=e[y.ct.ps]===y.Dt?null:m(e[y.ct.ps]),this.expiresAt=t}if(null!=e[y.ct.URL]&&(this.url=e[y.ct.URL]),null!=e[y.ct.bs]&&(this.linkText=e[y.ct.bs]),null!=e[y.ct.fs]){const t=parseFloat(e[y.ct.fs]);this.aspectRatio=isNaN(t)?null:t}return null!=e[y.ct.xs]&&(this.extras=e[y.ct.xs]),null!=e[y.ct.js]&&(this.pinned=e[y.ct.js]),null!=e[y.ct.zs]&&(this.dismissible=e[y.ct.zs]),null!=e[y.ct.ks]&&(this.test=e[y.ct.ks]),!0}}y.Dt=-1,y.es={st:"captioned_image",Ct:"text_announcement",dt:"short_news",rs:"banner_image",Rt:"control"},y.ct={ns:"id",ls:"v",zs:"db",At:"r",us:"ca",js:"p",ps:"ea",xs:"e",ts:"tp",os:"i",it:"tt",ht:"ds",URL:"u",bs:"dm",fs:"ar",gs:"cl",ks:"t"},y.hs={ns:"id",ls:"v",zs:"db",cs:"cr",us:"ca",js:"p",ds:"t",ps:"ea",xs:"e",ts:"tp",os:"i",it:"tt",ht:"ds",URL:"u",bs:"dm",fs:"ar",gs:"cl",ks:"s"},y._t={Lt:"ADVERTISING",Ot:"ANNOUNCEMENTS",bt:"NEWS",ft:"SOCIAL"},y.It=400;class k extends y{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d){super(e,t,null,a,null,i,s,n,r,o,l,c,u,h,p,d),this.Y="ab-banner",this.Z=!1}ss(){const e={};return e[y.hs.ts]=y.es.rs,e[y.hs.ns]=this.id,e[y.hs.ls]=this.viewed,e[y.hs.os]=this.imageUrl,e[y.hs.us]=this.updated,e[y.hs.cs]=this.created,e[y.hs.ds]=this.categories,e[y.hs.ps]=this.expiresAt,e[y.hs.URL]=this.url,e[y.hs.bs]=this.linkText,e[y.hs.fs]=this.aspectRatio,e[y.hs.xs]=this.extras,e[y.hs.js]=this.pinned,e[y.hs.zs]=this.dismissible,e[y.hs.gs]=this.clicked,e[y.hs.ks]=this.test,e}}class S extends y{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m){super(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m),this.Y="ab-captioned-image",this.Z=!0}ss(){const e={};return e[y.hs.ts]=y.es.st,e[y.hs.ns]=this.id,e[y.hs.ls]=this.viewed,e[y.hs.it]=this.title,e[y.hs.os]=this.imageUrl,e[y.hs.ht]=this.description,e[y.hs.us]=this.updated,e[y.hs.cs]=this.created,e[y.hs.ds]=this.categories,e[y.hs.ps]=this.expiresAt,e[y.hs.URL]=this.url,e[y.hs.bs]=this.linkText,e[y.hs.fs]=this.aspectRatio,e[y.hs.xs]=this.extras,e[y.hs.js]=this.pinned,e[y.hs.zs]=this.dismissible,e[y.hs.gs]=this.clicked,e[y.hs.ks]=this.test,e}}class A extends y{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m){super(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m),this.Y="ab-classic-card",this.Z=!0}ss(){const e={};return e[y.hs.ts]=y.es.dt,e[y.hs.ns]=this.id,e[y.hs.ls]=this.viewed,e[y.hs.it]=this.title,e[y.hs.os]=this.imageUrl,e[y.hs.ht]=this.description,e[y.hs.us]=this.updated,e[y.hs.cs]=this.created,e[y.hs.ds]=this.categories,e[y.hs.ps]=this.expiresAt,e[y.hs.URL]=this.url,e[y.hs.bs]=this.linkText,e[y.hs.fs]=this.aspectRatio,e[y.hs.xs]=this.extras,e[y.hs.js]=this.pinned,e[y.hs.zs]=this.dismissible,e[y.hs.gs]=this.clicked,e[y.hs.ks]=this.test,e}}class E extends y{constructor(e,t,a,i,s,n){super(e,t,null,null,null,null,a,null,i,null,null,null,s,n,null),this.Y="ab-control-card",this.Z=!1}ss(){const e={};return e[y.hs.ts]=y.es.Rt,e[y.hs.ns]=this.id,e[y.hs.ls]=this.viewed,e[y.hs.us]=this.updated,e[y.hs.ps]=this.expiresAt,e[y.hs.xs]=this.extras,e[y.hs.js]=this.pinned,e[y.hs.ks]=this.test,e}}class D{constructor(){}tf(){}ef(){}Ko(e){}static rf(e,t){if(e&&t)if(e=e.toLowerCase(),o(t.if)){for(let a=0;a<t.if.length;a++)if(-1!==e.indexOf(t.if[a].toLowerCase()))return t.identity}else if(-1!==e.indexOf(t.if.toLowerCase()))return t.identity}}const N={rE:"Chrome",eE:"Edge",vg:"Internet Explorer",EE:"Opera",yg:"Safari",oE:"Firefox"},C="Android",_="iOS",T="Mac",I="Windows";class O extends D{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.userAgentData){const e=this.sc();this.browser=e.browser||"Unknown Browser",this.version=e.version||"Unknown Version"}}tf(){return this.browser}ef(){return this.version}Ko(e){if(this.OS)return Promise.resolve(this.OS);const t=t=>{for(let a=0;a<e.length;a++){const i=O.rf(t,e[a]);if(i)return this.OS=i,this.OS}return t};return this.userAgentData.platform?Promise.resolve(t(this.userAgentData.platform)):this.ic().then((e=>t(e.platform))).catch((()=>navigator.platform))}sc(){const e={},t=this.userAgentData.brands;if(t&&t.length)for(const a of t){const t=this.nc(N),i=a.brand.match(t);if(i&&i.length>0){e.browser=i[0],e.version=a.version;break}}return e}nc(e){const t=[];for(const a in e)e[a]!==N.vg&&t.push(e[a]);return new RegExp("("+t.join("|")+")","i")}ic(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}}class z extends D{constructor(){super(),this.eu=z.nu(navigator.userAgent||"")}tf(){return this.eu[0]||"Unknown Browser"}ef(){return this.eu[1]||"Unknown Version"}Ko(e){for(let t=0;t<e.length;t++){let a=e[t].string,i=z.rf(a,e[t]);if(i)return i===T&&navigator.maxTouchPoints>1&&(i=_),Promise.resolve(i)}return Promise.resolve(navigator.platform)}static nu(e){let t,a=e.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(/trident/i.test(a[1]))return t=/\brv[ :]+(\.?\d+(\.\d+)*)/g.exec(e)||[],[N.vg,t[1]||""];if(-1!==e.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==e.indexOf("CrKey"))return["Chromecast",null];if(-1!==e.indexOf("BRAVIA")||-1!==e.indexOf("SonyCEBrowser")||-1!==e.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==e.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(e.match(/\b(Roku)\b/))return["Roku",null];if(e.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(a[1]===N.rE&&(t=e.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=t))return t=t.slice(1),t[0]=t[0].replace("OPR",N.EE),t[0]=t[0].replace("EdgA",N.eE),"Edg"===t[0]&&(t[0]=N.eE),[t[0],t[1]];if(a[1]===N.yg&&(t=e.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=t))return t=t.slice(1),t[0]=t[0].replace("EdgiOS",N.eE),[t[0],t[1]];if(a=a[2]?[a[1],a[2]]:[null,null],a[0]===N.yg&&null!=(t=e.match(/version\/(\.?\d+(\.\d+)*)/i))&&a.splice(1,1,t[1]),null!=(t=e.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&a.splice(1,1,t[2]),a[0]===N.EE&&null!=(t=e.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",t[1]||""];if(a[0]){const e=a[0].toLowerCase();"msie"===e&&(a[0]=N.vg),"crios"===e&&(a[0]=N.rE),"tizen"===e&&(a[0]="Samsung Smart TV",a[1]=null),"samsungbrowser"===e&&(a[0]="Samsung Browser")}return a}}class P{constructor(){const e=navigator.userAgentData?O:z;this.dg=new e,this.userAgent=navigator.userAgent,this.browser=this.dg.tf(),this.version=this.dg.ef(),this.Ko().then((e=>this.OS=e)),this.language=(navigator.userLanguage||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"").toLowerCase(),this.jo=P.Sg(this.userAgent)}bg(){return this.browser!==N.vg||this.version>8}Pa(){return this.browser===N.yg}qo(){return this.OS||null}Ko(){return this.OS?Promise.resolve(this.OS):this.dg.Ko(P.pg).then((e=>(this.OS=e,e)))}static Sg(e){e=e.toLowerCase();const t=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma"];for(let a=0;a<t.length;a++)if(-1!==e.indexOf(t[a]))return!0;return!1}}P.pg=[{string:navigator.platform,if:"Win",identity:I},{string:navigator.platform,if:"Mac",identity:T},{string:navigator.platform,if:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,if:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,if:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,if:"Nintendo",identity:"Nintendo"},{string:navigator.platform,if:"SunOS",identity:"SunOS"},{string:navigator.platform,if:"PlayStation",identity:"PlayStation"},{string:navigator.platform,if:"X11",identity:"X11"},{string:navigator.userAgent,if:["iPhone","iPad","iPod"],identity:_},{string:navigator.platform,if:"Pike v",identity:_},{string:navigator.userAgent,if:["Web0S"],identity:"WebOS"},{string:navigator.platform,if:["Linux armv7l","Android"],identity:C},{string:navigator.userAgent,if:["Android"],identity:C},{string:navigator.platform,if:"Linux",identity:"Linux"}];const M=new P;class U{constructor(e,t,a,i,s){this.userId=e,this.type=t,this.time=function(e){return null==e||""===e?(new Date).valueOf():e}(a),this.sessionId=i,this.data=s}Ye(){const e={name:this.type,time:d(this.time),data:this.data||{},session_id:this.sessionId};return null!=this.userId&&(e.user_id=this.userId),e}ss(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(e){return new U(e.user_id,e.name,e.time,e.session_id,e.data)}static ya(e){return null!=e&&c(e)&&null!=e.t&&""!==e.t}static An(e){return new U(e.u,e.t,e.ts,e.s,e.d)}}class R{constructor(e,t,a){null==e&&(e=s.nt.et()),a=parseInt(a),(isNaN(a)||0===a)&&(a=(new Date).valueOf()),this.Ir=e,this.xh=a,this._h=(new Date).valueOf(),this.Nh=t}ss(){return{g:this.Ir,e:this.Nh,c:this.xh,l:this._h}}static An(e){if(null==e||null==e.g)return null;const t=new R(e.g,e.e,e.c);return t._h=e.l,t}}function B(e){let t=e.length;for(let a=e.length-1;a>=0;a--){const i=e.charCodeAt(a);i>127&&i<=2047?t++:i>2047&&i<=65535&&(t+=2),i>=56320&&i<=57343&&a--}return t}const q={types:{ue:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",de:"openLink",pe:"openLinkInWebView"},properties:{type:"type",me:"steps",fe:"args"}},L="unknownBrazeAction",G="noPushPrompt",F=(e,t)=>{switch(e){case L:return`${t} contains an unknown braze action type and will not be displayed.`;case G:return`${t} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function $(e){try{let t=e.match(K)[0].length;const a=e.substring(t);if(t>e.length-1||!a)return void s.D.error(`Did not find base64 encoded brazeAction in url to process : ${e}`);const i=function(e){try{e=e.replace(/-/g,"+").replace(/_/g,"/");let t=window.atob(e),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);let i=new Uint16Array(a.buffer);return String.fromCharCode(...i)}catch(e){return s.D.error("Unable to decode Base64: "+e),null}}(a);return i?JSON.parse(i):void s.D.error(`Failed to decode base64 encoded brazeAction: ${a}`)}catch(t){return void s.D.error(`Failed to process brazeAction URL ${e} : ${t.message}`)}}function j(e,t){let a=!1;for(const i of t)if(a=a||e(i),a)return!0;return!1}function X(e){try{const t=e[q.properties.type];return t===q.types.ue?j(X,e[q.properties.me]):!function(e){return"string"==typeof e&&q.types[e]}(t)}catch(e){return!0}}function H(e){if(!ae(e))return!1;const t=e[q.properties.type];return t===q.types.ue?j(H,e[q.properties.me]):t===q.types.requestPushPermission}const W=/^[^\x00-\x1F\x22]+$/,J=new RegExp(/^.+@.+\..+$/),K=/^brazeActions:\/\/v\d+\//;function Y(e){const t=typeof e;return null==e||"number"===t||"boolean"===t||l(e)||"string"===t}function V(e,t){if(o(e)&&o(t)){for(let a=0;a<e.length&&a<t.length;a++)if(l(e[a])&&(t[a]=g(e[a])),!V(e[a],t[a]))return!1}else{if(!c(e))return Y(e);for(const a of h(e))if(l(e[a])&&(t[a]=g(e[a])),!V(e[a],t[a]))return!1}return!0}function Z(e,t,a,i){let n;return n=c(e)||o(e)?V(e,t):Y(e),n||s.D.error(`Cannot ${a} because ${i} "${e}" is invalid.`),n}function Q(e,t,a,i){const n="string"==typeof e||null===e&&i;return n||s.D.error(`Cannot ${t} because ${a} "${e}" is invalid.`),n}function ee(e,t,a){const i=null!=e&&"string"==typeof e&&(""===e||e.match(W));return i||s.D.error(`Cannot ${t} because ${a} "${e}" is invalid.`),i}function te(e,t,a,i,n){if(null==e&&(e={}),"object"!=typeof e||o(e))return s.D.error(`${t} requires that ${a} be an object. Ignoring ${n}.`),[!1,null];const r=JSON.stringify(e);if(B(r)>51200)return s.D.error(`Could not ${i} because ${a} was greater than the max size of 50KB.`),[!1,null];let c;try{c=JSON.parse(r)}catch(e){return s.D.error(`Could not ${i} because ${a} did not contain valid JSON.`),[!1,null]}for(let t in e){if(!ee(t,i,`the ${n} property name`))return[!1,null];const a=e[t];if(null!=a){if(l(a)&&(c[t]=g(a)),!Z(a,c[t],i,`the ${n} property "${t}"`))return[!1,null]}else delete e[t],delete c[t]}return[!0,c]}function ae(e){if(!(q.properties.type in e))return!1;switch(e[q.properties.type]){case q.types.ue:if(q.properties.me in e)return!0;break;case q.types.logCustomEvent:case q.types.setEmailNotificationSubscriptionType:case q.types.setPushNotificationSubscriptionType:case q.types.setCustomUserAttribute:case q.types.addToSubscriptionGroup:case q.types.removeFromSubscriptionGroup:case q.types.addToCustomAttributeArray:case q.types.removeFromCustomAttributeArray:case q.types.de:case q.types.pe:if(q.properties.fe in e)return!0;break;case q.types.requestPushPermission:return!0;default:return!1}return!1}class ie{constructor(e,t){this.v=e,this.Is=t}getUserId(e){null==e&&s.D.error("getUserId must be supplied with a callback. e.g., braze.getUser().getUserId(function(userId) {console.log('the user id is ' + userId)})"),"function"==typeof e&&e(this.v.getUserId())}addAlias(e,t){return!Q(e,"add alias","the alias",!1)||e.length<=0?(s.D.error("addAlias requires a non-empty alias"),!1):!Q(t,"add alias","the label",!1)||t.length<=0?(s.D.error("addAlias requires a non-empty label"),!1):this.Is.Sr(e,t).S}setFirstName(e){return!!Q(e,"set first name","the firstName",!0)&&this.v.Jr("first_name",e)}setLastName(e){return!!Q(e,"set last name","the lastName",!0)&&this.v.Jr("last_name",e)}setEmail(e){return null===e||function(e){return"string"==typeof e&&null!=e.toLowerCase().match(J)}(e)?this.v.Jr("email",e):(s.D.error(`Cannot set email address - "${e}" did not pass RFC-5322 validation.`),!1)}setGender(e){return"string"==typeof e&&(e=e.toLowerCase()),!(null!==e&&!r(ie.Genders,e,`Gender "${e}" is not a valid gender.`,"User.Genders"))&&this.v.Jr("gender",e)}setDateOfBirth(e,t,a){return null===e&&null===t&&null===a?this.v.Jr("dob",null):(e=parseInt(e),t=parseInt(t),a=parseInt(a),isNaN(e)||isNaN(t)||isNaN(a)||t>12||t<1||a>31||a<1?(s.D.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.v.Jr("dob",`${e}-${t}-${a}`))}setCountry(e){return!!Q(e,"set country","the country",!0)&&this.v.Jr("country",e)}setHomeCity(e){return!!Q(e,"set home city","the homeCity",!0)&&this.v.Jr("home_city",e)}setLanguage(e){return!!Q(e,"set language","the language",!0)&&this.v.Jr("language",e)}setEmailNotificationSubscriptionType(e){return!!r(ie.NotificationSubscriptionTypes,e,`Email notification setting "${e}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.Jr("email_subscribe",e)}setPushNotificationSubscriptionType(e){return!!r(ie.NotificationSubscriptionTypes,e,`Push notification setting "${e}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.Jr("push_subscribe",e)}setPhoneNumber(e){return!!Q(e,"set phone number","the phoneNumber",!0)&&(null===e||e.match(ie.Or)?this.v.Jr("phone",e):(s.D.error(`Cannot set phone number - "${e}" did not pass validation.`),!1))}setLastKnownLocation(e,t,a,i,n){return null==e||null==t?(s.D.error("Cannot set last-known location - latitude and longitude are required."),!1):(e=parseFloat(e),t=parseFloat(t),null!=a&&(a=parseFloat(a)),null!=i&&(i=parseFloat(i)),null!=n&&(n=parseFloat(n)),isNaN(e)||isNaN(t)||null!=a&&isNaN(a)||null!=i&&isNaN(i)||null!=n&&isNaN(n)?(s.D.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):e>90||e<-90||t>180||t<-180?(s.D.error("Cannot set last-known location - latitude and longitude are bounded by ±90 and ±180 respectively."),!1):null!=a&&a<0||null!=n&&n<0?(s.D.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Is.setLastKnownLocation(this.v.getUserId(),e,t,i,a,n).S)}setCustomUserAttribute(e,t){if(!ee(e,"set custom user attribute","the given key"))return!1;const a=typeof t,i=l(t),n=o(t);if("number"!==a&&"boolean"!==a&&!i&&!n&&null!==t&&!ee(t,`set custom user attribute "${e}"`,"the given value"))return!1;if(i&&(t=g(t)),n){for(let a=0;a<t.length;a++){if(!ee(t[a],`set custom user attribute "${e}"`,"the element in the given array"))return!1}return this.Is.Vr(s.A.Wr,e,t).S}return this.v.setCustomUserAttribute(e,t)}addToCustomAttributeArray(e,t){return!!ee(e,"add to custom user attribute array","the given key")&&!(null!=t&&!ee(t,"add to custom user attribute array","the given value"))&&this.Is.Vr(s.A.Yr,e,t).S}removeFromCustomAttributeArray(e,t){return!!ee(e,"remove from custom user attribute array","the given key")&&!(null!=t&&!ee(t,"remove from custom user attribute array","the given value"))&&this.Is.Vr(s.A.Qr,e,t).S}incrementCustomUserAttribute(e,t){if(!ee(e,"increment custom user attribute","the given key"))return!1;null==t&&(t=1);const a=parseInt(t);return isNaN(a)||a!==parseFloat(t)?(s.D.error(`Cannot increment custom user attribute because the given incrementValue "${t}" is not an integer.`),!1):this.Is.Vr(s.A.Xr,e,a).S}setCustomLocationAttribute(e,t,a){return!!ee(e,"set custom location attribute","the given key")&&((null!==t||null!==a)&&(t=parseFloat(t),a=parseFloat(a),isNaN(t)||t>90||t<-90||isNaN(a)||a>180||a<-180)?(s.D.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by ±90 and ±180 respectively, or must both be null for removal."),!1):this.Is.Zr(e,t,a).S)}addToSubscriptionGroup(e){return!Q(e,"add user to subscription group","subscription group ID",!1)||e.length<=0?(s.D.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Is.Cn(e,ie.In.SUBSCRIBED).S}removeFromSubscriptionGroup(e){return!Q(e,"remove user from subscription group","subscription group ID",!1)||e.length<=0?(s.D.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Is.Cn(e,ie.In.UNSUBSCRIBED).S}dn(e,t,a,i,s){this.v.dn(e,t,a,i,s),this.Is.Un()}pn(e){this.v.pn(e)}}ie.Or=/^[0-9 .\\(\\)\\+\\-]+$/,ie.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},ie.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},ie.In={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},ie.En="user_id",ie.Kr="custom",ie.ee=997;const se={Cr:{Ur:"ab.storage.userId",Go:"ab.storage.deviceId",Dh:"ab.storage.sessionId"},q:{ga:"ab.test",Ta:"ab.storage.events",Aa:"ab.storage.attributes",Oa:"ab.storage.attributes.anonymous_user",Ho:"ab.storage.device",Yo:"ab.storage.sdk_metadata",Zo:"ab.storage.session_id_for_cached_metadata",Nn:"ab.storage.pushToken",Ks:"ab.storage.newsFeed",Qs:"ab.storage.lastNewsFeedRefresh",P:"ab.storage.cardImpressions",nh:"ab.storage.serverConfig",Ia:"ab.storage.triggers",Ka:"ab.storage.triggers.ts",Ch:"ab.storage.messagingSessionStart",Wt:"ab.storage.cc",Cs:"ab.storage.ccLastFullSync",ws:"ab.storage.ccLastCardUpdated",$:"ab.storage.ccClicks",O:"ab.storage.ccImpressions",K:"ab.storage.ccDismissals",Ya:"ab.storage.lastDisplayedTriggerTimesById",Da:"ab.storage.lastDisplayedTriggerTime",Ga:"ab.storage.triggerFireInstancesById",Jn:"ab.storage.signature"},ae:"ab.optOut"};class ne{constructor(e,t){this.va=e,this.Na=t}Lr(e,t){let a=t;null!=t&&t instanceof R&&(a=t.ss()),this.va.store(e,a)}Ma(e){const t=this._r(e);null!=t&&(t._h=(new Date).valueOf(),this.Lr(e,t))}_r(e){return R.An(this.va.lr(e))}qh(e){this.va.remove(e)}bo(e){if(null==e||0===e.length)return!1;o(e)||(e=[e]);let t=this.Na.lr(se.q.Ta);null!=t&&o(t)||(t=[]);for(let a=0;a<e.length;a++)t.push(e[a].ss());return this.Na.store(se.q.Ta,t)}Hh(e){return null!=e&&this.bo([e])}Ca(){let e=this.Na.lr(se.q.Ta);this.Na.remove(se.q.Ta),null==e&&(e=[]);const t=[];let a=!1,i=null;if(o(e))for(let a=0;a<e.length;a++)U.ya(e[a])?t.push(U.An(e[a])):i=a;else a=!0;if(a||null!=i){let n="Stored events could not be deserialized as Events";a&&(n+=", was "+Object.prototype.toString.call(e)+" not an array"),null!=i&&(n+=", value at index "+i+" does not look like an event"),n+=", serialized values were of type "+typeof e+": "+JSON.stringify(e),t.push(new U(null,s.A.ha,(new Date).valueOf(),null,{e:n}))}return t}B(e,t){return!!r(se.q,e,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.Na.store(e,t)}I(e){return!!r(se.q,e,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.Na.lr(e)}$s(e){return!!r(se.q,e,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.Na.remove(e),!0)}clearData(){const e=h(se.Cr),t=h(se.q);for(let t=0;t<e.length;t++){const a=e[t];this.va.remove(se.Cr[a])}for(let e=0;e<t.length;e++){const a=t[e];this.Na.remove(se.q[a])}}Ua(e){return e||se.q.Oa}ba(e){let t=this.Na.lr(se.q.Aa);null==t&&(t={});const a=this.Ua(e[ie.En]);for(let i in e)i===ie.En||null!=t[a]&&null!=t[a][i]||this.Mr(e[ie.En],i,e[i])}Mr(e,t,a){let i=this.Na.lr(se.q.Aa);null==i&&(i={});const s=this.Ua(e);let n=i[s];if(null==n&&(n={},null!=e&&(n[ie.En]=e)),t===ie.Kr){null==n[t]&&(n[t]={});for(let e in a)n[t][e]=a[e]}else n[t]=a;return i[s]=n,this.Na.store(se.q.Aa,i)}Ba(){const e=this.Na.lr(se.q.Aa);this.Na.remove(se.q.Aa);const t=[];for(let a in e)null!=e[a]&&t.push(e[a]);return t}Gr(e){const t=this.Na.lr(se.q.Aa);if(null!=t){const a=this.Ua(null),i=t[a];null!=i&&(t[a]=void 0,this.Na.store(se.q.Aa,t),i[ie.En]=e,this.ba(i))}const a=this._r(se.Cr.Dh);let i=null;null!=a&&(i=a.Ir);const s=this.Ca();if(null!=s)for(let t=0;t<s.length;t++){const a=s[t];null==a.userId&&a.sessionId==i&&(a.userId=e),this.Hh(a)}}Fa(){return this.Na.La}}ne.wa=class{constructor(e){this.yi=e,this.La=M.Pa()?3:10}xa(e){return e+"."+this.yi}store(e,t){const a={v:t};try{return localStorage.setItem(this.xa(e),JSON.stringify(a)),!0}catch(e){return s.D.info("Storage failure: "+e.message),!1}}lr(e){try{const t=JSON.parse(localStorage.getItem(this.xa(e)));return null==t?null:t.v}catch(e){return s.D.info("Storage retrieval failure: "+e.message),null}}remove(e){try{localStorage.removeItem(this.xa(e))}catch(e){return s.D.info("Storage removal failure: "+e.message),!1}}},ne.ne=class{constructor(e,t){this.yi=e,this.Ja=this.ka(),this.za=576e3,this.Qa=!!t}xa(e){return null!=this.yi?e+"."+this.yi:e}ka(){let e=0,t=document.location.hostname;const a=t.split("."),i="ab._gd";for(;e<a.length-1&&-1===document.cookie.indexOf(i+"="+i);)e++,t="."+a.slice(-1-e).join("."),document.cookie=i+"="+i+";domain="+t+";";return document.cookie=i+"=;expires="+new Date(0).toGMTString()+";domain="+t+";",t}ie(){const e=new Date;return e.setTime(e.getTime()+60*this.za*1e3),e.getFullYear()}Va(){const e=n(se.Cr),t=document.cookie.split(";");for(let a=0;a<t.length;a++){let i=t[a];for(;" "===i.charAt(0);)i=i.substring(1);let s=!1;for(let t=0;t<e.length;t++)if(0===i.indexOf(e[t])){s=!0;break}if(s){const e=i.split("=")[0];-1===e.indexOf("."+this.yi)&&this.Ha(e)}}}store(e,t){this.Va();const a=new Date;a.setTime(a.getTime()+60*this.za*1e3);const i="expires="+a.toUTCString(),n="domain="+this.Ja;let r;r=this.Qa?t:encodeURIComponent(JSON.stringify(t));const o=this.xa(e)+"="+r+";"+i+";"+n+";path=/";return o.length>=4093?(s.D.info("Storage failure: string is "+o.length+" chars which is too large to store as a cookie."),!1):(document.cookie=o,!0)}lr(e){const t=[],a=this.xa(e)+"=",i=document.cookie.split(";");for(let n=0;n<i.length;n++){let r=i[n];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(a))try{let e;e=this.Qa?r.substring(a.length,r.length):JSON.parse(decodeURIComponent(r.substring(a.length,r.length))),t.push(e)}catch(t){return s.D.info("Storage retrieval failure: "+t.message),this.remove(e),null}}return t.length>0?t[t.length-1]:null}remove(e){this.Ha(this.xa(e))}Ha(e){const t=e+"=;expires="+new Date(0).toGMTString();document.cookie=t,document.cookie=t+";path=/";const a=t+";domain="+this.Ja;document.cookie=a,document.cookie=a+";path=/"}},ne._a=class{constructor(){this.Wa={},this.Xa=5242880,this.La=3}store(e,t){const a={value:t},i=this.qa(t);return i>this.Xa?(s.D.info("Storage failure: object is ≈"+i+" bytes which is greater than the max of "+this.Xa),!1):(this.Wa[e]=a,!0)}qa(e){const t=[],a=[e];let i=0;for(;a.length;){const e=a.pop();if("boolean"==typeof e)i+=4;else if("string"==typeof e)i+=2*e.length;else if("number"==typeof e)i+=8;else if("object"==typeof e&&-1===t.indexOf(e)){t.push(e);for(let t in e)a.push(e[t])}}return i}lr(e){const t=this.Wa[e];return null==t?null:t.value}remove(e){this.Wa[e]=null}},ne.Ea=class{constructor(e,t,a){this.Za=[],t&&this.Za.push(new ne.ne(e)),a&&this.Za.push(new ne.wa(e)),this.Za.push(new ne._a(e))}store(e,t){let a=!0;for(let i=0;i<this.Za.length;i++)a=this.Za[i].store(e,t)&&a;return a}lr(e){for(let t=0;t<this.Za.length;t++){const a=this.Za[t].lr(e);if(null!=a)return a}return null}remove(e){for(let t=0;t<this.Za.length;t++)this.Za[t].remove(e)}};class re{constructor(e,t,a){this.h=e,this.Fn=t||!1,this.xn=a,this.Tn=new x,this.qn=0,this.Bn=1}Gn(){return this.Fn}Hn(){return this.h.I(se.q.Jn)}setSdkAuthenticationSignature(e){const t=this.Hn();this.h.B(se.q.Jn,e);const a=s.Ft.xt;new s.qt(a,s.D).setItem(a.Pt.Kn,this.Bn,e),t!==e&&this.Es()}Ln(){this.h.$s(se.q.Jn);const e=s.Ft.xt;new s.qt(e,s.D).br(e.Pt.Kn,this.Bn)}subscribeToSdkAuthenticationFailures(e){return this.xn.Et(e)}Mn(e){this.xn.Nt(e)}On(){this.Tn.removeAllSubscriptions()}Qn(){this.qn+=1}Rn(){return this.qn}Es(){this.qn=0}}class oe{constructor(){}_s(){}changeUser(e){}clearData(){}}var le={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"};class ce{constructor(e){this.id=e}Ye(){const e={};return null!=this[le.BROWSER]&&(e.browser=this[le.BROWSER]),null!=this[le.BROWSER_VERSION]&&(e.browser_version=this[le.BROWSER_VERSION]),null!=this[le.OS]&&(e.os_version=this[le.OS]),null!=this[le.RESOLUTION]&&(e.resolution=this[le.RESOLUTION]),null!=this[le.LANGUAGE]&&(e.locale=this[le.LANGUAGE]),null!=this[le.TIME_ZONE]&&(e.time_zone=this[le.TIME_ZONE]),null!=this[le.USER_AGENT]&&(e.user_agent=this[le.USER_AGENT]),e}}class ue{constructor(e,t){this.h=e,null==t&&(t=n(le)),this.xo=t}te(){let e=this.h._r(se.Cr.Go);null==e&&(e=new R(s.nt.et()),this.h.Lr(se.Cr.Go,e));const t=new ce(e.Ir);for(let e=0;e<this.xo.length;e++){const a=this.xo[e];switch(a){case le.BROWSER:t[a]=M.browser;break;case le.BROWSER_VERSION:t[a]=M.version;break;case le.OS:t[a]=this.Fo();break;case le.RESOLUTION:t[a]=screen.width+"x"+screen.height;break;case le.LANGUAGE:t[a]=M.language;break;case le.TIME_ZONE:t[a]=this.Jo(new Date);break;case le.USER_AGENT:t[a]=M.userAgent}}return t}Fo(){if(M.qo())return M.qo();const e=this.h.I(se.q.Ho);return e&&e.os_version?e.os_version:M.Ko()}Jo(e){if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=e&&""!==e)return e}}catch(e){s.D.info("Intl.DateTimeFormat threw an error, probably https://bugs.chromium.org/p/chromium/issues/detail?id=811403, falling back to GTM offset: "+e.message)}const t=e.getTimezoneOffset();return this.Qo(t)}Qo(e){const t=parseInt(e/60),a=parseInt(e%60);let i="GMT";return 0!==e&&(i+=e<0?"+":"-",i+=("00"+Math.abs(t)).slice(-2)+":"+("00"+Math.abs(a)).slice(-2)),i}}function he(e,t,a){let i=`The '${e}' ${t} is deprecated.`;a&&(i+=` Please use '${a}' instead.`),s.D.warn(i)}var pe="invalid_api_key",de="blacklisted",be="no_device_identifier",me="invalid_json_response",ge="empty_response";class fe{constructor(e,t,a,i,s,n,r,o,l,c,u){this.ji=e,this.h=t,this.Wo=a,this.v=i,this.j=s,this.wt=n,this.yi=r,this.Do=o,this.Ro=l,this.Bo=c,this.Xo=u,this.$o=["npm"]}Ls(e,t){const a=this.ji.te(),i=a.Ye();p(this.h.I(se.q.Ho),i)||(e.device=i),e.api_key=this.yi,e.time=d((new Date).valueOf(),!0);const s=this.h.I(se.q.Yo)||[],n=this.h.I(se.q.Zo)||"";if(this.$o.length>0&&(!p(s,this.$o)||n!==this.j.sa())&&(e.sdk_metadata=this.$o),e.sdk_version=this.Ro,this.Bo&&(e.sdk_flavor=this.Bo),e.app_version=this.Xo,e.device_id=a.id,t){const t=this.v.getUserId();null!=t&&(e.user_id=t)}return e}qs(e,t,a){const i=t.auth_error,n=t.error;if(!i&&!n)return!0;if(i){let t;this.Wo.Qn();const n={errorCode:i.error_code};for(const e of a)o(e)&&"X-Braze-Auth-Signature"===e[0]&&(n.signature=e[1]);e.respond_with&&e.respond_with.user_id?n.userId=e.respond_with.user_id:e.user_id&&(n.userId=e.user_id);const r=i.reason;return r?(n.reason=r,t=`due to ${r}`):t=`with error code ${i.error_code}.`,this.Wo.Gn()||(t+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),s.D.error(`SDK Authentication failed ${t}`),this.ia(e.events,e.attributes),this.Wo.Mn(n),!1}if(n){let a=n;switch(a){case ge:const i="Received successful response with empty body.";return Ft.G(s.A.ha,{e:i}),s.D.info(i),!1;case me:const n="Received successful response with invalid JSON";return Ft.G(s.A.ha,{e:n+": "+t.response}),s.D.info(n),!1;case pe:a=`The API key "${e.api_key}" is invalid for the baseUrl ${this.Do}`;break;case de:a="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case be:a="No device identifier. Please contact support@braze.com"}s.D.error("Backend error: "+a)}return!1}ma(e,t,a,i){return!!(e&&0!==e.length||t&&0!==t.length||a||i)}pa(e,t,a,i){const s=[],n=e=>e||"",r=n(this.v.getUserId());let o,l,c,u,h=this.Xe(e,t);if(a.length>0){const e=[];for(const t of a){if(o=t.Ye(),this.Wo.Gn()){if(r&&!o.user_id){u||(u={},u.events=[]),u.events.push(o);continue}if(n(o.user_id)!==r){l||(l=[]),l.push(o);continue}}e.push(o)}e.length>0&&(h.events=e)}if(i.length>0){const e=[];for(const t of i)this.Wo.Gn()&&n(t.user_id)!==r?(c||(c=[]),c.push(t)):e.push(t);e.length>0&&(h.attributes=e)}if(this.ia(l,c),h=this.Ls(h,!0),u){u=this.Ls(u,!1);const e={requestData:u,headers:this.Ns(u)};s.push(e)}if(h&&!this.ma(h.events,h.attributes,e,t))return u?s:null;const p={requestData:h,headers:this.Ns(h)};return s.push(p),s}ia(e,t){if(e){const t=[];for(const a of e){const e=U.fromJson(a);e.time=b(e.time),t.push(e)}this.h.bo(t)}if(t)for(const e of t)this.h.ba(e)}Ms(e,t){let a="HTTP error ";null!=e&&(a+=e+" "),a+=t,s.D.error(a)}yr(e){return Ft.G(s.A.Ra,{n:e})}Xe(e,t,a){const i={};e&&(i.feed=!0),t&&(i.triggers=!0);const s=null!=a?a:this.v.getUserId();return s&&(i.user_id=s),i.config={config_time:this.wt.Gs()},{respond_with:i}}Ns(e,t){const a=[["X-Braze-Api-Key",this.yi]];let i=!1;if(null!=e.respond_with&&e.respond_with.triggers&&(a.push(["X-Braze-TriggersRequest","true"]),i=!0),null!=e.respond_with&&e.respond_with.feed&&(a.push(["X-Braze-FeedRequest","true"]),i=!0),t&&(a.push(["X-Braze-ContentCardsRequest","true"]),i=!0),i&&a.push(["X-Braze-DataRequest","true"]),this.Wo.Gn()){const e=this.Wo.Hn();null!=e&&a.push(["X-Braze-Auth-Signature",e])}return a}As(e,t){const a=e.device;a&&a.os_version instanceof Promise?a.os_version.then((a=>{e.device.os_version=a,t()})):t()}Es(){this.Wo.Es()}Js(){return this.Do}addSdkMetadata(e){for(const t of e)-1===this.$o.indexOf(t)&&this.$o.push(t)}}const ve=e=>{let t,a,i=!1;try{if(window.XMLHttpRequest&&(t=new XMLHttpRequest)&&void 0!==t.withCredentials||("undefined"!=typeof XDomainRequest?(t=new XDomainRequest,t.async=!0,i=!0):s.D.error("This browser does not have any supported ajax options!")),null!=t){const s=()=>{"function"==typeof e.error&&e.error(t.status),"function"==typeof e.fl&&e.fl(!1)};if(t.onload=()=>{let a=!1;if(i)a=!0;else{if(4!==t.readyState)return;a=t.status>=200&&t.status<300||304===t.status}if(a){if("function"==typeof e.S){let i;try{i=JSON.parse(t.responseText)}catch(a){const i={error:""===t.responseText?ge:me,response:t.responseText};e.S(i)}i&&e.S(i)}"function"==typeof e.fl&&e.fl(!0)}else s()},t.onerror=()=>{s()},t.ontimeout=()=>{s()},a=JSON.stringify(e.data),i)t.onprogress=()=>{},t.open("post",e.url);else{t.open("POST",e.url,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Requested-With","XMLHttpRequest");const a=e.headers||[];for(let e=0;e<a.length;e++)t.setRequestHeader(a[e][0],a[e][1])}t.send(a)}}catch(e){s.D.error(`Network request error: ${e.message}`)}},we=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e);class xe{constructor(e,t){this.S=!!e,this.ve=t||[]}V(e){this.S=this.S&&e.S,this.ve.push(...e.ve)}}class ye{constructor(e,t,a,i,s,n,r,o,l,c){this.yi=e,this.Do=t,this.sl=0,this.il=r.Fa(),this.hl=null,this.j=a,this.ji=i,this.v=s,this.wt=n,this.h=r,this.Wo=l,this.jt=c,this.ol=o,this.rl=new x,this.ul=50}al(e,t){return!e&&!t&&this.Wo.Rn()>=this.ul}cl(e){let t=this.j.Eh();if(e.length>0){const a=this.v.getUserId();for(const i of e){const e=!i.userId&&!a||i.userId===a;i.type===s.A.Wh&&e&&(t=!0)}}return t}dl(e,t,a,i,n,r,o){null==a&&(a=!0),a&&this.ml();const l=this.h.Ca(),c=this.h.Ba();let u=!1;const h=(e,t)=>{let s=!1;ve({url:this.Do+"/data/",data:e,headers:t,S:a=>{null!=e.respond_with&&e.respond_with.triggers&&(this.sl=Math.max(this.sl-1,0)),this.jt.qs(e,a,t)?(this.Wo.Es(),this.wt.lh(a),null!=e.respond_with&&e.respond_with.user_id!=this.v.getUserId()||(null!=e.device&&this.h.B(se.q.Ho,e.device),null!=e.sdk_metadata&&(this.h.B(se.q.Yo,e.sdk_metadata),this.h.B(se.q.Zo,this.j.sa())),this.ol(a),"function"==typeof i&&i())):a.auth_error&&(s=!0)},error:()=>{null!=e.respond_with&&e.respond_with.triggers&&(this.sl=Math.max(this.sl-1,0)),this.jt.ia(e.events,e.attributes),"function"==typeof n&&n()},fl:e=>{if("function"==typeof r&&r(e),a&&!u){if(e&&!s)this.gl();else{let e=this.hl;(null==e||e<1e3*this.il)&&(e=1e3*this.il),this.gl(Math.min(3e5,we(1e3*this.il,3*e)))}u=!0}}})},p=this.cl(l),d=t||p;if(this.al(o,p))return void s.D.info("Declining to flush data due to 50 consecutive authentication failures");if(a&&!this.jt.ma(l,c,e,d))return this.gl(),void("function"==typeof r&&r(!0));const b=this.jt.pa(e,d,l,c);d&&this.sl++;let m=!1;if(b)for(const e of b)this.jt.As(e.requestData,(()=>h(e.requestData,e.headers))),m=!0;this.Wo.Gn()&&a&&!m?this.gl():p&&(s.D.info("Invoking new session subscriptions"),this.rl.Nt())}bl(){return this.sl>0}gl(e){this.kl||(null==e&&(e=1e3*this.il),this.ml(),this.wl=setTimeout((()=>{if(document.hidden){const e="visibilitychange",t=()=>{document.hidden||(document.removeEventListener(e,t,!1),this.dl())};document.addEventListener(e,t,!1)}else this.dl()}),e),this.hl=e)}ml(){null!=this.wl&&(clearTimeout(this.wl),this.wl=null)}initialize(){this.kl=!1,this.gl()}destroy(){this.rl.removeAllSubscriptions(),this.Wo.On(),this.ml(),this.kl=!0,this.dl(null,null,!1),this.wl=null}cr(e){return this.rl.Et(e)}openSession(){const e=this.j.sa()!==this.j.mo();e&&(this.h.Ma(se.Cr.Go),this.h.Ma(se.Cr.Ur)),this.dl(null,!1,null,null,null),this.Un(),e&&Promise.resolve().then((function(){return $a})).then((e=>{if(this.kl)return;const t=e.default.Br();if(null!=t&&(t.isPushPermissionGranted()||t.isPushBlocked())){const e=()=>{t.Qi()?s.D.info("Push token maintenance is disabled, not refreshing token for backend."):t.subscribe()},a=(t,a)=>{a&&e()},i=()=>{const t=this.h.I(se.q.Nn);(null==t||t)&&e()},n=s.Ft.xt;new s.qt(n,s.D).hr(n.Pt.Nr,a,i)}}))}changeUser(e,t,a){const i=this.v.getUserId();if(i!==e){this.j.kh(),null!=i&&this.dl(null,!1,null,null,null),this.v.Er(e),a?this.Wo.setSdkAuthenticationSignature(a):this.Wo.Ln();for(let e=0;e<t.length;e++)t[e].changeUser(null==i);null!=i&&this.h.$s(se.q.P),this.h.$s(se.q.Ho),this.openSession(),s.D.info('Changed user to "'+e+'".')}else{let t="Doing nothing.";a&&this.Wo.Hn()!==a&&(this.Wo.setSdkAuthenticationSignature(a),t="Updated SDK authentication signature"),s.D.info(`Current user is already ${e}. ${t}`)}}requestImmediateDataFlush(e){this.ml(),this.j.mo(),this.dl(null,null,null,null,null,e,!0)}requestFeedRefresh(){this.j.mo(),this.dl(!0)}zr(e,t){this.j.mo(),s.D.info("Requesting explicit trigger refresh."),this.dl(null,!0,null,e,t)}Sr(e,t){const a=s.A.yl,i={a:e,l:t},n=Ft.G(a,i);return n&&s.D.info(`Logged alias ${e} with label ${t}`),n}Vr(e,t,a){if(this.wt.Hr(t))return s.D.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new xe;const i={key:t,value:a},n=Ft.G(e,i);return n&&s.D.info(`Logged custom attribute: ${t} with value: ${a}`),n}setLastKnownLocation(e,t,a,i,n,r){const o={latitude:t,longitude:a};null!=i&&(o.altitude=i),null!=n&&(o.ll_accuracy=n),null!=r&&(o.alt_accuracy=r);const l=Ft.G(s.A.vl,o,e);return l&&s.D.info(`Set user last known location as ${JSON.stringify(o,null,2)}`),l}kr(e,t){const a=this.j.mo();return new U(this.v.getUserId(),s.A.Sl,e,a,{cid:t})}Un(){const e=s.Ft.xt;new s.qt(e,s.D).setItem(e.Pt.jl,1,{baseUrl:this.Do,data:{api_key:this.yi,device_id:this.ji.te().id},userId:this.v.getUserId(),sdkAuthEnabled:this.Wo.Gn()})}wr(e){for(const t of e)if(t.api_key===this.yi)this.jt.ia(t.events,t.attributes);else{const e=s.Ft.xt;new s.qt(e,s.D).setItem(e.Pt.$r,s.nt.et(),t)}}Zr(e,t,a){if(this.wt.Hr(e))return s.D.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new xe;let i,n;return null===t&&null===a?(i=s.A.$l,n={key:e}):(i=s.A.Al,n={key:e,latitude:t,longitude:a}),Ft.G(i,n)}Cn(e,t){const a={group_id:e,status:t};return Ft.G(s.A.Cl,a)}}class ke{constructor(e,t,a,i,s,n,r){this.hh=e||0,this.gh=t||[],this.mh=a||[],this.fh=i||[],this.ph=s,null!=s&&""!==s||(this.ph=null),this.oh=n||null,this.uh=r||{}}ss(){return{s:"4.0.5",l:this.hh,e:this.gh,a:this.mh,p:this.fh,m:this.ph,v:this.oh,c:this.uh}}static An(e){let t=e.l;return"4.0.5"!==e.s&&(t=0),new ke(t,e.e,e.a,e.p,e.m,e.v,e.c)}}class Se{constructor(e){this.h=e,this.sh=new x,this.eh=new x,this.ih=null}rh(){if(null==this.ih){const e=this.h.I(se.q.nh);this.ih=null!=e?ke.An(e):new ke}return this.ih}Gs(){return this.rh().hh}lh(e){if(null!=e&&null!=e.config){const t=e.config;if(t.time>this.rh().hh){const e=new ke(t.time,t.events_blacklist,t.attributes_blacklist,t.purchases_blacklist,t.messaging_session_timeout,t.vapid_public_key,t.content_cards);let a=!1;null!=e.oh&&this.kn()!==e.oh&&(a=!0);let i=!1;null!=e.uh.enabled&&this.Bs()!==e.uh.enabled&&(i=!0),this.ih=e,this.h.B(se.q.nh,e.ss()),a&&this.sh.Nt(),i&&this.eh.Nt()}}}Sn(e){let t=this.sh.Et(e);return this.ah&&this.sh.removeSubscription(this.ah),this.ah=t,t}Rs(e){return this.eh.Et(e)}ge(e){return-1!==this.rh().gh.indexOf(e)}Hr(e){return-1!==this.rh().mh.indexOf(e)}Dr(e){return-1!==this.rh().fh.indexOf(e)}dh(){return this.rh().ph}kn(){return this.rh().oh}Bs(){return this.rh().uh.enabled||!1}}class Ae{constructor(e,t,a,i){this.h=e,this.v=t,this.wt=a,this.wh=1e3,i=parseFloat(i),isNaN(i)&&(i=1800),i<this.wh/1e3&&(s.D.info("Specified session timeout of "+i+"s is too small, using the minimum session timeout of "+this.wh/1e3+"s instead."),i=this.wh/1e3),this.Sh=i}jh(e,t){return new U(this.v.getUserId(),s.A.bh,e,t.Ir,{d:d(e-t.xh)})}sa(){const e=this.h._r(se.Cr.Dh);return null==e?null:e.Ir}Eh(){const e=(new Date).valueOf(),t=this.wt.dh(),a=this.h.I(se.q.Ch);if(null!=a&&null==t)return!1;const i=null==a||e-a>1e3*t;return i&&this.h.B(se.q.Ch,e),i}Gh(e,t){return null==t||!(e-t.xh<this.wh)&&t.Nh<e}mo(){const e=(new Date).valueOf(),t=e+1e3*this.Sh,a=this.h._r(se.Cr.Dh);if(this.Gh(e,a)){let i="Generating session start event with time "+e;if(null!=a){let e=a._h;e-a.xh<this.wh&&(e=a.xh+this.Fh),this.h.Hh(this.jh(e,a)),i+=" (old session ended "+e+")"}i+=". Will expire "+t.valueOf(),s.D.info(i);const n=new R(s.nt.et(),t);return this.h.Hh(new U(this.v.getUserId(),s.A.Wh,e,n.Ir)),this.h.Lr(se.Cr.Dh,n),null==this.h.I(se.q.Ch)&&this.h.B(se.q.Ch,e),n.Ir}return a._h=e,a.Nh=t,this.h.Lr(se.Cr.Dh,a),a.Ir}kh(){const e=this.h._r(se.Cr.Dh);null!=e&&(this.h.qh(se.Cr.Dh),this.h.Hh(this.jh((new Date).valueOf(),e)))}}const Ee={zo:(e,t)=>{let a=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(se.q.ga,!0),localStorage.getItem(se.q.ga)&&(localStorage.removeItem(se.q.ga),a=!0)}catch(e){if("QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||!(localStorage.length>0))throw e;a=!0}}catch(e){s.D.info("Local Storage not supported!")}const i=Ee.Sa(),n=new ne.Ea(e,i&&!t,a);let r=null;return r=a?new ne.wa(e):new ne._a,new ne(n,r)},Sa:()=>navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)};class De{constructor(e){this.triggerId=e}static fromJson(e){return new De(e.trigger_id)}}const Ne={tu:null,eo:function(e,t,a,i){if(null==e)return!1;t=t||!1,a=a||!1;const s=e.getBoundingClientRect();return null!=s&&(s.top>=0&&s.top<=(window.innerHeight||document.documentElement.clientHeight)||!t)&&(s.left>=0||!i)&&(s.bottom>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!a)&&(s.right<=(window.innerWidth||document.documentElement.clientWidth)||!i)}},Ce="up",_e="down",Te="left",Ie="right";function Oe(){if(null==Ne.tu){Ne.tu=!1;try{const e=Object.defineProperty({},"passive",{get:()=>{Ne.tu=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}}return Ne.tu}function ze(e,t,a){e.addEventListener(t,a,!!Oe()&&{passive:!0})}function Pe(e){return Ne.eo(e,!0,!1,!1)}function Me(e){return Ne.eo(e,!1,!0,!1)}function Ue(e){if(e.onclick){const t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.onclick.apply(e,[t])}}function Re(e,t,a){let i=null,s=null;ze(e,"touchstart",(e=>{i=e.touches[0].clientX,s=e.touches[0].clientY})),ze(e,"touchmove",(n=>{if(null==i||null==s)return;const r=i-n.touches[0].clientX,o=s-n.touches[0].clientY;Math.abs(r)>Math.abs(o)&&Math.abs(r)>=25?((r>0&&t===Te||r<0&&t===Ie)&&a(n),i=null,s=null):Math.abs(o)>=25&&((o>0&&t===Ce&&e.scrollTop===e.scrollHeight-e.offsetHeight||o<0&&t===_e&&0===e.scrollTop)&&a(n),i=null,s=null)}))}function Be(e,t,a){const i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg");s.setAttribute("viewBox",e),s.setAttribute("xmlns",i);const n=document.createElementNS(i,"path");return n.setAttribute("d",t),null!=a&&n.setAttribute("fill",a),s.appendChild(n),s}const qe=32,Le=9,Ge=13,Fe=27;class $e{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m,g,f,v,w,y,k,S,A,E,D,N,C,_){this.message=e,this.messageAlignment=t||$e.TextAlignment.CENTER,this.duration=c||5e3,this.slideFrom=a||$e.SlideFrom.BOTTOM,this.extras=i||{},this.triggerId=s,this.clickAction=n||$e.ClickAction.NONE,this.uri=r,this.openTarget=o||$e.OpenTarget.NONE,this.dismissType=l||$e.DismissType.AUTO_DISMISS,this.icon=u,this.imageUrl=h,this.imageStyle=p||$e.ImageStyle.TOP,this.iconColor=d||$e.ci.mi,this.iconBackgroundColor=b||$e.ci.hi,this.backgroundColor=m||$e.ci.mi,this.textColor=g||$e.ci.li,this.closeButtonColor=f||$e.ci.Ei,this.animateIn=v,null==this.animateIn&&(this.animateIn=!0),this.animateOut=w,null==this.animateOut&&(this.animateOut=!0),this.header=y,this.headerAlignment=k||$e.TextAlignment.CENTER,this.headerTextColor=S||$e.ci.li,this.frameColor=A||$e.ci.ui,this.buttons=E||[],this.cropType=D||$e.CropType.FIT_CENTER,this.orientation=N,this.htmlId=C,this.css=_,this.Ti=!1,this.nl=!1,this.Ii=!1,this.lt=new x,this.Ai=new x}subscribeToClickedEvent(e){return this.lt.Et(e)}subscribeToDismissedEvent(e){return this.Ai.Et(e)}removeSubscription(e){this.lt.removeSubscription(e),this.Ai.removeSubscription(e)}removeAllSubscriptions(){this.lt.removeAllSubscriptions(),this.Ai.removeAllSubscriptions()}closeMessage(){this.on(this.mn)}we(){return!0}ll(){return this.we()}an(){return null!=this.htmlId&&this.htmlId.length>4}sn(){return this.an()&&null!=this.css&&this.css.length>0}rn(){if(this.an()&&this.sn())return this.htmlId+"-css"}R(){return!this.Ti&&(this.Ti=!0,!0)}k(){return!this.nl&&(this.nl=!0,this.lt.Nt(),!0)}J(){return!this.Ii&&(this.Ii=!0,this.Ai.Nt(),!0)}Ni(e){if(e&&e.parentNode){let t=e.closest(".ab-iam-root");if(null==t&&(t=e),this.we()&&null!=t.parentNode){const e=t.parentNode.classList;e&&e.contains($e._i)&&e.remove($e._i),document.body.removeEventListener("touchmove",$e.Li)}t.className=t.className.replace($e.di,$e._)}return this.animateOut}on(e,t){if(null==e)return;let a;this.mn=null,a=-1===e.className.indexOf("ab-in-app-message")?e.getElementsByClassName("ab-in-app-message")[0]:e;let i=!1;a&&(i=this.Ni(a));const s=document.body;if(null!=s)var n=s.scrollTop;const r=()=>{if(e&&e.parentNode){let t=e.closest(".ab-iam-root");null==t&&(t=e),t.parentNode&&t.parentNode.removeChild(t)}if(null!=this.rn()){const e=document.getElementById(this.rn());e&&e.parentNode&&e.parentNode.removeChild(e)}null!=s&&"Safari"===M.browser&&(s.scrollTop=n),t?t():this.J()};i?setTimeout(r,$e.Oi):r(),this.he&&this.he.focus()}Me(){return document.createTextNode(this.message)}xe(e){let t="";this.message||this.header||!this.we()||(t="Modal Image"),e.setAttribute("alt",t)}static Li(e){e.targetTouches&&e.targetTouches.length>1||e.target.classList&&e.target.classList.contains("ab-message-text")&&e.target.scrollHeight>e.target.clientHeight||document.querySelector(`.${$e._i}`)&&e.preventDefault()}Si(e){this.we()&&null!=e.parentNode&&this.orientation!==$e.Orientation.LANDSCAPE&&(null!=e.parentNode.classList&&e.parentNode.classList.add($e._i),document.body.addEventListener("touchmove",$e.Li,!!Oe()&&{passive:!1})),e.className+=" "+$e.di}static Di(e){if(e.keyCode===Fe&&!Lt.nn(Bt.Ri)&&document.querySelectorAll(".ab-modal-interactions").length>0){const e=document.getElementsByClassName("ab-html-message");let t=!1;for(let a=0;a<e.length;a++){const i=e[a].contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0];null!=i&&(Ue(i),t=!0)}if(!t){const e=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=e&&Ue(e)}}}bi(){this.Pi||Lt.nn(Bt.Ri)||(document.addEventListener("keydown",$e.Di,!1),Lt.Ci((()=>{document.removeEventListener("keydown",$e.Di)})),this.Pi=!0)}}$e.ci={li:4281545523,mi:4294967295,hi:4278219733,Ui:4293914607,pi:4283782485,ui:3224580915,Ei:4288387995},$e.Ge={fi:"hd",gi:"ias",Hi:"of",Fi:"do",ri:"umt",Ze:"tf",Bi:"te"},$e.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},$e.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},$e.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},$e.OpenTarget={NONE:"NONE",BLANK:"BLANK"},$e.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},$e.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},$e.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},$e.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},$e.es={vi:"SLIDEUP",Gi:"MODAL",ye:"MODAL_STYLED",Tr:"FULL",el:"WEB_HTML",cn:"HTML"},$e.Oi=500,$e.Wi=200,$e.di="ab-show",$e.ki="ab-hide",$e._i="ab-pause-scrolling";class je extends $e{constructor(e,t,a,i,s,n,r,o,l,c,u){i=i||$e.DismissType.MANUAL,null!=e&&e.length>0&&e.indexOf('"ab-in-app-message ab-html-message ab-email-capture"')>0&&e.indexOf('"ab-in-app-message ab-show ab-modal ab-effect-modal"')>0&&(n=!0,r=!0),super(e,null,null,t,a,null,null,null,i,s,null,null,null,null,null,null,null,null,n,r,null,null,null,o,void 0,void 0,void 0,l,c),this.messageFields=u}ll(){return!1}k(e){if(this.un===$e.es.el){if(this.nl)return!1;this.nl=!0}return this.lt.Nt(e),!0}}je.es=$e.es.el;class Xe{constructor(e,t,a,i,s,n,r){this.text=e||"",this.backgroundColor=t||$e.ci.hi,this.textColor=a||$e.ci.mi,this.borderColor=i||this.backgroundColor,this.clickAction=s||$e.ClickAction.NONE,this.uri=n,null==r&&(r=Xe.Je),this.id=r,this.nl=!1,this.lt=new x}subscribeToClickedEvent(e){return this.lt.Et(e)}removeSubscription(e){this.lt.removeSubscription(e)}removeAllSubscriptions(){this.lt.removeAllSubscriptions()}k(){return!this.nl&&(this.nl=!0,this.lt.Nt(),!0)}static fromJson(e){return new Xe(e.text,e.bg_color,e.text_color,e.border_color,e.click_action,e.uri,e.id)}}Xe.Je=-1;class He extends $e{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m,g,f,v,w,x,y,k,S,A,E,D,N){o=o||$e.DismissType.MANUAL,E=E||$e.Orientation.PORTRAIT,super(e,t,null,a,i,s,n,r,o,l,c,u,h,p,d,b,m,g,f,v,w,x,y,k,S,A=A||$e.CropType.CENTER_CROP,E,D,N)}get ke(){return $e.TextAlignment.CENTER}}He.es=$e.es.Tr;class We extends $e{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m,g,f,v,w,x,y,k,S,A,E,D){super(e,t,null,a,i,s,n,r,o=o||$e.DismissType.MANUAL,l,c,u,h,p,d,b,m,g,f,v,w,x,y,k,S,A=A||$e.CropType.FIT_CENTER,void 0,E,D)}get ke(){return $e.TextAlignment.CENTER}}We.es=$e.es.Gi;class Je extends $e{constructor(e,t,a,i,s,n,r,o,l,c,u,h,p,d,b,m,g,f,v,w,x){m=m||$e.ci.pi,b=b||$e.ci.Ui,super(e,t=t||$e.TextAlignment.START,a,i,s,n,r,o,l,c,u,h,null,p,d,b,m,g,f,v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,w,x)}we(){return!1}get ke(){return $e.TextAlignment.START}Me(){const e=document.createElement("span");return e.appendChild(document.createTextNode(this.message)),e}Si(e){const t=e.getElementsByClassName("ab-in-app-message")[0];Ne.eo(t,!0,!0)||(this.slideFrom===$e.SlideFrom.TOP?t.style.top="0px":t.style.bottom="0px"),super.Si(e)}}function Ke(e){if(e.is_control)return De.fromJson(e);let t=e.type;null!=t&&(t=t.toUpperCase());const a=e.message,i=e.text_align_message,n=e.slide_from,r=e.extras,o=e.trigger_id,l=e.click_action,c=e.uri,u=e.open_target,h=e.message_close,p=e.duration,d=e.icon,b=e.image_url,m=e.image_style,g=e.icon_color,f=e.icon_bg_color,v=e.bg_color,w=e.text_color,x=e.close_btn_color,y=e.header,k=e.text_align_header,S=e.header_text_color,A=e.frame_color,E=[];let D=e.btns;null==D&&(D=[]);for(let e=0;e<D.length;e++)E.push(Xe.fromJson(D[e]));const N=e.crop_type,C=e.orientation,_=e.animate_in,T=e.animate_out;let I,O=e.html_id,z=e.css;if(null!=O&&""!==O&&null!=z&&""!==z||(O=void 0,z=void 0),t===We.es||t===$e.es.ye)I=new We(a,i,r,o,l,c,u,h,p,d,b,m,g,f,v,w,x,_,T,y,k,S,A,E,N,O,z);else if(t===He.es)I=new He(a,i,r,o,l,c,u,h,p,d,b,m,g,f,v,w,x,_,T,y,k,S,A,E,N,C,O,z);else if(t===Je.es)I=new Je(a,i,n,r,o,l,c,u,h,p,d,b,g,f,v,w,x,_,T,O,z);else{if(t!==je.es&&t!==$e.es.cn)return void s.D.error("Ignoring message with unknown type "+t);{const t=e.message_fields;I=new je(a,r,o,h,p,_,T,A,O,z,t),I.trusted=e.trusted||!1}}return I.un=t,I}Je.es=$e.es.vi;class Ye{constructor(e){this.xl=e}zl(e){return null==this.xl||this.xl===e[0]}static fromJson(e){return new Ye(e?e.event_name:null)}ss(){return this.xl}}class Ve{constructor(e,t,a,i){this.El=e,this.Tl=t,this.comparator=a,this._l=i,this.Tl===Ve.Ml.Nl&&this.comparator!==Ve.Hl.Rl&&this.comparator!==Ve.Hl.Ll&&this.comparator!==Ve.Hl.Il&&this.comparator!==Ve.Hl.Ol&&(this._l=m(this._l))}zl(e){let t=null;switch(null!=e&&(t=e[this.El]),this.comparator){case Ve.Hl.Ul:return null!=t&&t.valueOf()===this._l.valueOf();case Ve.Hl.Dl:return null==t||t.valueOf()!==this._l.valueOf();case Ve.Hl.Ql:return typeof t==typeof this._l&&t>this._l;case Ve.Hl.Rl:return this.Tl===Ve.Ml.Nl?null!=t&&l(t)&&v(t)<=this._l:typeof t==typeof this._l&&t>=this._l;case Ve.Hl.Xl:return typeof t==typeof this._l&&t<this._l;case Ve.Hl.Ll:return this.Tl===Ve.Ml.Nl?null!=t&&l(t)&&v(t)>=this._l:typeof t==typeof this._l&&t<=this._l;case Ve.Hl.Gl:return null!=t&&"string"==typeof t&&typeof t==typeof this._l&&null!=t.match(this._l);case Ve.Hl.Fl:return null!=t;case Ve.Hl.Jl:return null==t;case Ve.Hl.Il:return null!=t&&l(t)&&w(t)<this._l;case Ve.Hl.Ol:return null!=t&&l(t)&&w(t)>this._l;case Ve.Hl.Vl:return null==t||typeof t!=typeof this._l||"string"!=typeof t||null==t.match(this._l)}return!1}static fromJson(e){return new Ve(e.property_key,e.property_type,e.comparator,e.property_value)}ss(){let e=this._l;return l(this._l)&&(e=d(e.valueOf())),{k:this.El,t:this.Tl,c:this.comparator,v:e}}static An(e){return new Ve(e.k,e.t,e.c,e.v)}}Ve.Hl={Ul:1,Dl:2,Ql:3,Rl:4,Xl:5,Ll:6,Gl:10,Fl:11,Jl:12,Il:15,Ol:16,Vl:17},Ve.Ml={ql:"boolean",Kl:"number",Pl:"string",Nl:"date"};class Ze{constructor(e){this.filters=e}zl(e){let t=!0;for(let a=0;a<this.filters.length;a++){const i=this.filters[a];let s=!1;for(let t=0;t<i.length;t++)if(i[t].zl(e)){s=!0;break}if(!s){t=!1;break}}return t}static fromJson(e){if(null==e||!o(e))return null;const t=[];for(let a=0;a<e.length;a++){const i=[],s=e[a];for(let e=0;e<s.length;e++)i.push(Ve.fromJson(s[e]));t.push(i)}return new Ze(t)}ss(){const e=[];for(let t=0;t<this.filters.length;t++){const a=this.filters[t],i=[];for(let e=0;e<a.length;e++)i.push(a[e].ss());e.push(i)}return e}static An(e){const t=[];for(let a=0;a<e.length;a++){const i=[],s=e[a];for(let e=0;e<s.length;e++)i.push(Ve.An(s[e]));t.push(i)}return new Ze(t)}}class Qe{constructor(e,t){this.xl=e,this.Bl=t}zl(e){if(null==this.xl||null==this.Bl)return!1;const t=e[0],a=e[1];return t===this.xl&&this.Bl.zl(a)}static fromJson(e){return new Qe(e?e.event_name:null,e?Ze.fromJson(e.property_filters):null)}ss(){return{e:this.xl,pf:this.Bl.ss()}}}class et{constructor(e,t){this.Wl=e,this.Yl=t}zl(e){if(null==this.Wl)return!1;const t=nt.Zl(e[0],this.Wl);if(!t)return!1;let a=null==this.Yl||0===this.Yl.length;if(null!=this.Yl)for(let t=0;t<this.Yl.length;t++)if(this.Yl[t]===e[1]){a=!0;break}return t&&a}static fromJson(e){return new et(e?e.id:null,e?e.buttons:null)}ss(){return this.Wl}}class tt{constructor(e){this.productId=e}zl(e){return null==this.productId||e[0]===this.productId}static fromJson(e){return new tt(e?e.product_id:null)}ss(){return this.productId}}class at{constructor(e,t){this.productId=e,this.Bl=t}zl(e){if(null==this.productId||null==this.Bl)return!1;const t=e[0],a=e[1];return t===this.productId&&this.Bl.zl(a)}static fromJson(e){return new at(e?e.product_id:null,e?Ze.fromJson(e.property_filters):null)}ss(){return{id:this.productId,pf:this.Bl.ss()}}}class it{constructor(e){this.Wl=e}zl(e){return null==this.Wl||nt.Zl(e[0],this.Wl)}static fromJson(e){return new it(e?e.campaign_id:null)}ss(){return this.Wl}}var st={OPEN:"open",Rr:"purchase",vr:"push_click",be:"custom_event",Ar:"iam_click",ks:"test"};class nt{constructor(e,t){this.type=e,this.data=t}$a(e,t){return nt.ec[this.type]===e&&(null==this.data||this.data.zl(t))}static Zl(e,t){let a=null;try{a=window.atob(e)}catch(t){return s.D.info("Failed to unencode analytics id "+e+": "+t.message),!1}return t===a.split("_")[0]}static fromJson(e){const t=e.type;let a;switch(t){case nt.tc.OPEN:a=null;break;case nt.tc.Rr:a=tt.fromJson(e.data);break;case nt.tc.rc:a=at.fromJson(e.data);break;case nt.tc.vr:a=it.fromJson(e.data);break;case nt.tc.be:a=Ye.fromJson(e.data);break;case nt.tc.ac:a=Qe.fromJson(e.data);break;case nt.tc.Ar:a=et.fromJson(e.data);break;case nt.tc.ks:a=null}return new nt(t,a)}ss(){return{t:this.type,d:this.data?this.data.ss():null}}static An(e){let t,a;switch(e.t){case nt.tc.OPEN:t=null;break;case nt.tc.Rr:t=new tt(e.d);break;case nt.tc.rc:a=e.d||{},t=new at(a.id,Ze.An(a.pf||[]));break;case nt.tc.vr:t=new it(e.d);break;case nt.tc.be:t=new Ye(e.d);break;case nt.tc.ac:a=e.d||{},t=new Qe(a.e,Ze.An(a.pf||[]));break;case nt.tc.Ar:t=new et(e.d);break;case nt.tc.ks:t=null}return new nt(e.t,t)}}nt.tc={OPEN:"open",Rr:"purchase",rc:"purchase_property",vr:"push_click",be:"custom_event",ac:"custom_event_property",Ar:"iam_click",ks:"test"},nt.ec={},nt.ec[nt.tc.OPEN]=st.OPEN,nt.ec[nt.tc.Rr]=st.Rr,nt.ec[nt.tc.rc]=st.Rr,nt.ec[nt.tc.vr]=st.vr,nt.ec[nt.tc.be]=st.be,nt.ec[nt.tc.ac]=st.be,nt.ec[nt.tc.Ar]=st.Ar,nt.ec[nt.tc.ks]=st.ks;class rt{constructor(e,t,a,i,s,n,r,o,l,c,u,h){this.id=e,this.Th=t||[],void 0===a&&(a=null),this.startTime=a,void 0===i&&(i=null),this.endTime=i,this.priority=s||0,this.type=n,this.Ph=o||0,null==c&&(c=1e3*(this.Ph+30)),this.ai=c,this.data=r,null==l&&(l=rt.yh),this.Ah=l,this.Ih=u,this.$h=h||null}Mh(e){return null==this.$h||this.Ah!==rt.yh&&e-this.$h>=1e3*this.Ah}Bh(e){this.$h=e}Jh(e){const t=e+1e3*this.Ph;return Math.max(t-(new Date).valueOf(),0)}Lh(e){const t=(new Date).valueOf()-e,a=null==e||isNaN(t)||null==this.ai||t<this.ai;return a||s.D.info(`Trigger action ${this.type} is no longer eligible for display - fired ${t}ms ago and has a timeout of ${this.ai}ms.`),!a}static fromJson(e){const t=e.id,a=[];for(let t=0;t<e.trigger_condition.length;t++)a.push(nt.fromJson(e.trigger_condition[t]));const i=m(e.start_time),s=m(e.end_time),n=e.priority,o=e.type,l=e.delay,c=e.re_eligibility,u=e.timeout,h=e.data,p=e.min_seconds_since_last_trigger;return r(rt.ii,o,"Could not construct Trigger from server data","Trigger.Types")?new rt(t,a,i,s,n,o,h,l,c,u,p):null}ss(){const e=[];for(let t=0;t<this.Th.length;t++)e.push(this.Th[t].ss());return{i:this.id,c:e,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.Ph,r:this.Ah,tm:this.ai,ss:this.Ih,ld:this.$h}}static An(e){const t=[];for(let a=0;a<e.c.length;a++)t.push(nt.An(e.c[a]));return new rt(e.i,t,f(e.s),f(e.e),e.p,e.t,e.da,e.d,e.r,e.tm,e.ss,e.ld)}}rt.yh=-1,rt.ii={ei:"inapp",Rh:"templated_iam"};class ot{constructor(e,t,a,i){this.jt=e,this.j=t,this.h=a,this.v=i,this.Xs=new x,Lt.Ut(this.Xs),this.Ys=1e3,this.Zs=6e4}De(){return this.Xs}_e(e){return this.Xs.Et(e)}Se(){return this.Be}Ee(e){this.Be=e}Fe(e,t){if(!r($e.Ge,t,`${t} is not a valid in-app message display failure`,"InAppMessage.DisplayFailures"))return new xe;const a={trigger_ids:[e],error_code:t};return Ft.G(s.A.Ne,a)}G(e,t,a,i){const n=new xe;let r;if(e instanceof De)r={trigger_ids:[e.triggerId]};else{if(t===s.A.qe||e instanceof je&&t===s.A.Oe){if(!e.k(i))return s.D.info("This in-app message has already received a click. Ignoring analytics event."),n}else if(t===s.A.Pe&&!e.R())return s.D.info("This in-app message has already received an impression. Ignoring analytics event."),n;r=this.Re(e)}return null==r?n:(null!=a&&(r.bid=a),Ft.G(t,r))}He(e,t){const a=new xe;if(!e.k())return s.D.info("This in-app message button has already received a click. Ignoring analytics event."),a;const i=this.Re(t);return null==i?a:e.id===Xe.Je?(s.D.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),a):(null!=e.id&&(i.bid=e.id),Ft.G(s.A.Oe,i))}async Ke(e){if(!(e instanceof $e))return;const t=async e=>{const t=$(e);if(X(t))return F(L,"In-App Message");if(H(t)){const e=(await Promise.resolve().then((function(){return $a}))).default.getPushManager();if(null!=e&&!e.Ue())return F(G,"In-App Message")}},a=e.buttons;for(const e of a)if(e.clickAction===$e.ClickAction.URI&&K.test(e.uri))return t(e.uri);return e.clickAction===$e.ClickAction.URI&&K.test(e.uri)?t(e.uri):void 0}We(e,t,a,i){let n=this.jt.Xe(!1,!1);n=this.jt.Ls(n),n.template={trigger_id:e.triggerId,trigger_event_type:t},null!=a&&(n.template.data=a.Ye());const r=this.jt.Ns(n);this.jt.As(n,(()=>{ve({url:`${this.jt.Js()}/template/`,data:n,headers:r,S:async t=>{if(!this.jt.qs(n,t,r))return this.Fe(e.triggerId,$e.Ge.Ze),void("function"==typeof e.si&&e.si());if(this.jt.Es(),null==t||null==t.templated_message)return void this.Fe(e.triggerId,$e.Ge.Ze);const a=t.templated_message;if(a.type!==rt.ii.ei)return void this.Fe(e.triggerId,$e.Ge.ri);const i=Ke(a.data);if(null==i)return void this.Fe(e.triggerId,$e.Ge.ri);let o=await this.Ke(i);if(o)return s.D.error(o),void("function"==typeof e.si&&e.si());"function"==typeof e.ni?e.ni(i):this.Fe(e.triggerId,$e.Ge.Ze)},error:s=>{let n=`getting user personalization for message ${e.triggerId}`;if((new Date).valueOf()-e.oi>e.ai)this.Fe(e.triggerId,$e.Ge.Ze);else{const s=Math.min(e.ai,this.Zs),r=this.Ys;null==i&&(i=r);const o=Math.min(s,we(r,3*i));n+=`. Retrying in ${o} ms`,setTimeout((()=>{this.We(e,t,a,o)}),o)}this.jt.Ms(s,n)}})}))}Re(e){if(null==e.triggerId)return s.D.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const t={};return null!=e.triggerId&&(t.trigger_ids=[e.triggerId]),t}}const lt={Ae:null,t:!1,m:()=>(lt.o(),lt.Ae||(lt.Ae=new ot(Lt.nr(),Lt.g(),Lt.l(),Lt.p())),lt.Ae),o:()=>{lt.t||(Lt.u(lt),lt.t=!0)},destroy:()=>{lt.Ae=null,lt.t=!1}};function ct(e,t,a){const i=e||document.querySelector("head"),s=`ab-${t}-css-definitions-${"4.0.5".replace(/\./g,"-")}`,n=i.ownerDocument||document;if(null==n.getElementById(s)){const e=n.createElement("style");e.innerHTML=a,e.id=s;const t=Lt.nn(Bt.ao);null!=t&&e.setAttribute("nonce",t),i.appendChild(e)}}function ut(){if(Lt.nn(Bt.So))return;const e="https://use.fontawesome.com/7f85a56ba4.css";if(null===document.querySelector('link[rel=stylesheet][href="'+e+'"]')){const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)}}function ht(){(function(e){ct(e,"feed","body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-banner .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px;padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}")})(),ut()}function pt(e){ct(e,"iam",".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-centering-div,.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:9011;-webkit-tap-highlight-color:transparent}.ab-centering-div:focus,.ab-iam-root.v3:focus{outline:0}.ab-centering-div.ab-effect-fullscreen,.ab-centering-div.ab-effect-html,.ab-centering-div.ab-effect-modal,.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-centering-div.ab-effect-fullscreen.ab-show,.ab-centering-div.ab-effect-html.ab-show,.ab-centering-div.ab-effect-modal.ab-show,.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-centering-div.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-centering-div.ab-effect-html.ab-show.ab-animate-in,.ab-centering-div.ab-effect-modal.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-centering-div.ab-effect-fullscreen.ab-hide,.ab-centering-div.ab-effect-html.ab-hide,.ab-centering-div.ab-effect-modal.ab-hide,.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-centering-div.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-centering-div.ab-effect-html.ab-hide.ab-animate-out,.ab-centering-div.ab-effect-modal.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-centering-div.ab-effect-slide .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-centering-div.ab-effect-slide.ab-show .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-centering-div.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-centering-div.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-centering-div .ab-ios-scroll-wrapper,.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-centering-div .ab-in-app-message,.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:9011;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333}.ab-centering-div .ab-in-app-message.ab-no-shadow,.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-centering-div .ab-in-app-message :focus,.ab-centering-div .ab-in-app-message:focus,.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-centering-div .ab-in-app-message.ab-clickable,.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-centering-div .ab-in-app-message.ab-background,.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-centering-div .ab-in-app-message .ab-close-button,.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021}.ab-centering-div .ab-in-app-message .ab-close-button svg,.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b}.ab-centering-div .ab-in-app-message .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-centering-div .ab-in-app-message .ab-close-button:active,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-close-button:focus,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-close-button:hover,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-close-button:hover svg,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-centering-div .ab-in-app-message .ab-message-text,.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-centering-div .ab-in-app-message .ab-message-text.start-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:left;text-align:start}.ab-centering-div .ab-in-app-message .ab-message-text.end-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:right;text-align:end}.ab-centering-div .ab-in-app-message .ab-message-text.center-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar-button,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-message-header,.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-centering-div .ab-in-app-message .ab-message-header.start-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:left;text-align:start}.ab-centering-div .ab-in-app-message .ab-message-header.end-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:right;text-align:end}.ab-centering-div .ab-in-app-message .ab-message-header.center-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-centering-div .ab-in-app-message.ab-fullscreen,.ab-centering-div .ab-in-app-message.ab-modal,.ab-centering-div .ab-in-app-message.ab-slideup,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-centering-div .ab-in-app-message.ab-slideup,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron),.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text span,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button svg,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:active,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:focus,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:hover,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:hover svg,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-centering-div .ab-in-app-message.ab-slideup .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-centering-div .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-centering-div .ab-in-app-message.ab-slideup .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-centering-div .ab-in-app-message.ab-fullscreen,.ab-centering-div .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-icon,.ab-centering-div .ab-in-app-message.ab-modal .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic,.ab-centering-div .ab-in-app-message.ab-modal.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-centering-div .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-centering-div .ab-in-app-message.ab-modal.simulate-phone,.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-centering-div .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-centering-div .ab-in-app-message.ab-modal.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{max-height:720px;max-width:450px}.ab-centering-div .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic),.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-centering-div .ab-in-app-message.ab-html-message,.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-centering-div .ab-in-app-message .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-centering-div .ab-in-app-message .ab-message-button,.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-centering-div .ab-in-app-message .ab-message-button:first-of-type,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-centering-div .ab-in-app-message .ab-message-button:last-of-type,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-centering-div .ab-in-app-message .ab-message-button:first-of-type:last-of-type,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-centering-div .ab-in-app-message .ab-message-button:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-centering-div .ab-in-app-message .ab-message-button:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-centering-div .ab-in-app-message .ab-message-button:hover,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-centering-div .ab-in-app-message .ab-message-button:active:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-centering-div .ab-in-app-message .ab-message-button:focus:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-centering-div .ab-in-app-message .ab-message-button a,.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-centering-div .ab-in-app-message img,.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-centering-div .ab-in-app-message .ab-icon,.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-centering-div .ab-in-app-message .ab-icon .fa,.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-centering-div .ab-start-hidden,.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-centering-div .ab-centered,.ab-centering-div.ab-centering-div .ab-modal,.ab-iam-root.v3 .ab-centered,.ab-iam-root.v3.ab-centering-div .ab-modal{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-email-capture,.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-email-capture .ab-page-blocker,.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9001;pointer-events:all;background-color:rgba(51,51,51,.75)}.ab-email-capture .ab-in-app-message.ab-modal .ab-email-capture-input{margin-bottom:30px}.ab-email-capture .ab-in-app-message.ab-modal .ab-message-buttons~.ab-message-text{max-height:541px;margin-bottom:160px}.ab-email-capture .ab-in-app-message.ab-modal .ab-message-buttons~.ab-message-text.with-explanatory-link{max-height:513px;margin-bottom:188px}.ab-email-capture .ab-in-app-message.ab-modal .ab-image-area~.ab-message-text{max-height:385.82758621px}.ab-email-capture .ab-in-app-message.ab-modal .ab-image-area~.ab-message-text.with-explanatory-link{max-height:357.82758621px}.ab-email-capture .ab-in-app-message.ab-modal .ab-email-validation-error{margin-top:62px}.ab-email-capture .ab-in-app-message.ab-modal .ab-explanatory-link{display:block}.ab-email-capture .ab-in-app-message.ab-modal .ab-background,.ab-email-capture .ab-in-app-message.ab-modal .ab-mask{position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}.ab-email-capture .ab-in-app-message.ab-modal .ab-close-button{line-height:normal}.ab-email-capture .ab-in-app-message.ab-modal .ab-html-close-button{right:3px;top:-1px;font-size:34px;padding-top:0}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop),.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop),.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}")}function dt(){pt(),ut()}function bt(e,t,a){const i=document.createElement("button");i.setAttribute("aria-label",e),i.setAttribute("tabindex","0"),i.setAttribute("role","button"),ze(i,"touchstart",(()=>{})),i.className="ab-close-button";const s=Be("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",t);return i.appendChild(s),i.addEventListener("keydown",(e=>{e.keyCode!==qe&&e.keyCode!==Ge||(a(),e.stopPropagation())})),i.onclick=e=>{a(),e.stopPropagation()},i}function mt(e,t){if(e=parseInt(e),isNaN(e))return"";t=parseFloat(t),isNaN(t)&&(t=1);const a=255&(e>>>=0),i=(65280&e)>>>8,s=(16711680&e)>>>16,n=((4278190080&e)>>>24)/255;return M.bg()?"rgba("+[s,i,a,n*t].join(",")+")":"rgb("+[s,i,a].join(",")+")"}function gt(e){if(!Lt.rr())return!1;if(!(e instanceof $e))return s.D.error("inAppMessage must be an InAppMessage object"),!1;const t=lt.m().G(e,s.A.qe);if(t)for(let a=0;a<t.ve.length;a++)Mt.er().je(st.Ar,[e.triggerId],t.ve[a]);return t.S}const ft=0,vt=1;const wt={openUri:function(e,t,a){t||null!=a&&a.metaKey?window.open(e):window.location=e},so:function(){return screen.width<=600},io:function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?vt:ft;if("screen"in window){let e=window.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=e&&"object"==typeof e&&(e=e.type),"landscape-primary"===e||"landscape-secondary"===e?vt:ft}return ft},Pn:function(){return window.location.href}};function xt(){if(Lt.rr())return Lt.gr()}function yt(e,t,a){if(Lt.rr())if(K.test(e)){const t=$(e);if(!t)return;const a=async e=>{if(!ae(e))return void s.D.error(`Decoded Braze Action json is invalid: ${JSON.stringify(e,null,2)}`);const t=e[q.properties.type];if(t===q.types.ue)for(const t of e[q.properties.me])a(t);else{const a=e[q.properties.fe];let i,n;switch(t){case q.types.logCustomEvent:i=await Promise.resolve().then((function(){return Na})),i.logCustomEvent.apply(null,Array.prototype.slice.call(a));break;case q.types.requestPushPermission:i=await Promise.resolve().then((function(){return Xa})),i.requestPushPermission();break;case q.types.setEmailNotificationSubscriptionType:case q.types.setPushNotificationSubscriptionType:case q.types.setCustomUserAttribute:case q.types.addToSubscriptionGroup:case q.types.removeFromSubscriptionGroup:case q.types.addToCustomAttributeArray:case q.types.removeFromCustomAttributeArray:n=xt(),n[t].apply(n,Array.prototype.slice.call(a));break;case q.types.de:case q.types.pe:wt.openUri.apply(null,Array.prototype.slice.call(a));break;default:s.D.info(`Ignoring unknown Braze Action: ${t}`)}}};a(t)}else wt.openUri(e,a,t)}function kt(e,t,a){if(!Lt.rr())return!1;if(!(e instanceof je))return s.D.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;let i=s.A.qe;null!=t&&(i=s.A.Oe);const n=lt.m().G(e,i,t,a);if(n.S)for(let a=0;a<n.ve.length;a++)Mt.er().je(st.Ar,[e.triggerId,t],n.ve[a]);return n.S}function St(e){null==e&&(e="");const t=e.split("?").slice(1).join("?"),a={};if(null!=t){const e=t.split("&");for(let t=0;t<e.length;t++){const i=e[t].split("=");""!==i[0]&&(a[i[0]]=i[1])}}return a}function At(e){return!(!e||0!==(e=e.toString().toLowerCase()).lastIndexOf("javascript:",0)&&0!==e.lastIndexOf("data:",0))}function Et(e,t){if(!Lt.rr())return!1;if(!(e instanceof Xe))return s.D.error("button must be an InAppMessageButton object"),!1;if(!(t instanceof $e))return s.D.error("inAppMessage must be an InAppMessage object"),!1;const a=lt.m().He(e,t);if(a.S)for(let i=0;i<a.ve.length;i++)Mt.er().je(st.Ar,[t.triggerId,e.id],a.ve[i]);return a.S}const Dt=e=>{const t=e.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button");for(let e=0;e<t.length;e++)t[e].tabIndex=0;if(t.length>0){const a=t[0],i=t[t.length-1];e.addEventListener("keydown",(t=>{var s=document.activeElement;t.keyCode===Le&&(t.shiftKey||s!==i&&s!==e?!t.shiftKey||s!==a&&s!==e||(t.preventDefault(),i.focus()):(t.preventDefault(),a.focus()))}))}},Nt=(e,t)=>{t.setAttribute("role","dialog"),t.setAttribute("aria-modal",!0),t.setAttribute("aria-label","Modal Message"),e&&t.setAttribute("aria-labelledby",e)},Ct=(e,t,a,i)=>{if(e.buttons.length>0){const s=document.createElement("div");s.className="ab-message-buttons",a.appendChild(s);const n=a.getElementsByClassName("ab-message-text")[0];null!=n&&(n.className+=" ab-with-buttons");const r=s=>n=>(e.on(a,(()=>{Et(s,e),s.clickAction===$e.ClickAction.URI?yt(s.uri,n,i||e.openTarget===$e.OpenTarget.BLANK):s.clickAction===$e.ClickAction.NEWS_FEED&&t()})),n.stopPropagation(),!1);for(let t=0;t<e.buttons.length;t++){const a=e.buttons[t],i=document.createElement("button");i.className="ab-message-button",i.setAttribute("type","button"),ze(i,"touchstart",(function(){}));let n=a.text;""===a.text&&(n=" "),i.appendChild(document.createTextNode(n)),e.sn()||(i.style.backgroundColor=mt(a.backgroundColor),i.style.color=mt(a.textColor),i.style.borderColor=mt(a.borderColor)),i.onclick=r(a),s.appendChild(i)}}};function _t(e,t,a,i,n,r){if(e.he=document.activeElement,e instanceof je)return function(e,t,a,i,s,n){const r=document.createElement("iframe");r.setAttribute("title","Modal Message"),s&&(r.style.zIndex=s+1);const o=t=>{const a=t.getAttribute("href"),s=t.onclick;return n=>{if(null!=s&&"function"==typeof s&&!1===s())return;let o=St(a).abButtonId;if(null!=o&&""!==o||(o=t.getAttribute("id")),null!=a&&""!==a&&0!==a.indexOf("#")){const s="blank"===(t.getAttribute("target")||"").toLowerCase().replace("_",""),l=i||e.openTarget===$e.OpenTarget.BLANK||s,c=()=>{kt(e,o,a),wt.openUri(a,l,n)};l?c():e.on(r,c)}else kt(e,o,a);return n.stopPropagation(),!1}},l=(e,t,a)=>{const i=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${a}['"]\\)`,s=e.match(new RegExp(i));if(s){const a=`${s[1]}.setAttribute("nonce", "${t}")`;return`${e.slice(0,s.index+s[0].length)};${a};${e.slice(s.index+s[0].length)}`}return null};if(r.onload=()=>{let i=null;if(null!=n){i=document.createElement("html"),i.innerHTML=e.message;const t=i.getElementsByTagName("style");for(let e=0;e<t.length;e++)t[e].setAttribute("nonce",n);const a=i.getElementsByTagName("script");for(let e=0;e<a.length;e++){a[e].setAttribute("nonce",n),a[e].innerHTML=a[e].innerHTML.replace(/<style>/g,`<style nonce='${n}'>`);const t=l(a[e].innerHTML,n,"script");t&&(a[e].innerHTML=t);const i=l(a[e].innerHTML,n,"style");i&&(a[e].innerHTML=i)}}r.contentWindow.focus(),r.contentWindow.document.write(i?i.innerHTML:e.message);const s=r.contentWindow.document.getElementsByTagName("head")[0];if(null!=s){if(pt(s),e.sn()){const t=document.createElement("style");t.innerHTML=e.css,t.id=e.rn(),null!=n&&t.setAttribute("nonce",n),s.appendChild(t)}const t=r.contentWindow.document.createElement("base");t.setAttribute("target","_parent"),s.appendChild(t)}const c=r.contentWindow.document.getElementsByTagName("title");c.length>0&&r.setAttribute("title",c[0].textContent);const u={closeMessage:function(){e.on(r)},logClick:function(){const t=[e,...arguments];kt.apply(e,Array.prototype.slice.call(t))},display:{},web:{}},p=function(){return function(){const e=arguments;Promise.resolve().then((function(){return Xa})).then((t=>{t.requestPushPermission.apply(null,Array.prototype.slice.call(e))}))}},d={requestImmediateDataFlush:async function(){const e=arguments;(await Promise.resolve().then((function(){return Ia}))).requestImmediateDataFlush.apply(null,Array.prototype.slice.call(e))},logCustomEvent:async function(){const e=arguments;(await Promise.resolve().then((function(){return Na}))).logCustomEvent.apply(null,Array.prototype.slice.call(e))},logPurchase:async function(){const e=arguments;(await Promise.resolve().then((function(){return _a}))).logPurchase.apply(null,Array.prototype.slice.call(e))},unregisterPush:async function(){const e=arguments;(await Promise.resolve().then((function(){return Wa}))).unregisterPush.apply(null,Array.prototype.slice.call(e))},requestPushPermission:p()},b=function(e){return function(){d[e].apply(null,Array.prototype.slice.call(arguments))}};for(const e of h(d))u[e]=b(e);const m=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup"],g=function(e){return function(){const t=xt();t[e].apply(t,Array.prototype.slice.call(arguments))}},f={};for(let e=0;e<m.length;e++)f[m[e]]=g(m[e]);u.getUser=function(){return f};const v={showFeed:t},w=function(t){return function(){const a=arguments;e.on(r,(function(){v[t].apply(null,Array.prototype.slice.call(a))}))}};for(const e of h(v))u.display[e]=w(e);const x={registerAppboyPushMessages:p()},y=function(e){return function(){x[e].apply(null,Array.prototype.slice.call(arguments))}};for(const e of h(x))u.web[e]=y(e);if(r.contentWindow.appboyBridge=u,r.contentWindow.brazeBridge=u,e.un!==$e.es.cn){const e=r.contentWindow.document.getElementsByTagName("a");for(let t=0;t<e.length;t++)e[t].onclick=o(e[t]);const t=r.contentWindow.document.getElementsByTagName("button");for(let e=0;e<t.length;e++)t[e].onclick=o(t[e])}const k=r.contentWindow.document.body;if(null!=k){e.an()&&(k.id=e.htmlId);const t=document.createElement("hidden");t.onclick=u.closeMessage,t.className="ab-programmatic-close-button",k.appendChild(t)}r.contentWindow.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==r.className.indexOf("ab-start-hidden")&&(r.className=r.className.replace("ab-start-hidden",""),a(r)),document.activeElement!==r&&r.focus()},r.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",M.OS===_){const t=document.createElement("div");return t.className="ab-ios-scroll-wrapper",t.appendChild(r),e.mn=t,t}return e.mn=r,r}(e,t,a,i,n,r);const o=function(e,t,a,i,n){const r=document.createElement("div");r.className="ab-in-app-message ab-start-hidden ab-background",n&&(r.style.zIndex=n+1),e.we()&&(r.className+=" ab-modal-interactions",r.setAttribute("tabindex","-1")),e.sn()||(r.style.color=mt(e.textColor),r.style.backgroundColor=mt(e.backgroundColor),function(e){return e=parseInt(e),!isNaN(e)&&(4278190080&e)>>>24==0}(e.backgroundColor)&&(r.className+=" ab-no-shadow"));const o=()=>{-1!==r.className.indexOf("ab-start-hidden")&&(r.className=r.className.replace("ab-start-hidden",""),a(r))};e.imageStyle===$e.ImageStyle.GRAPHIC&&(r.className+=" graphic"),e.orientation===$e.Orientation.LANDSCAPE&&(r.className+=" landscape"),0===e.buttons.length&&(e.clickAction!==$e.ClickAction.NONE&&(r.className+=" ab-clickable"),r.onclick=a=>(e.on(r,(()=>{gt(e),e.clickAction===$e.ClickAction.URI?yt(e.uri,a,i||e.openTarget===$e.OpenTarget.BLANK):e.clickAction===$e.ClickAction.NEWS_FEED&&t()})),a.stopPropagation(),!1));const l=bt("Close Message",e.sn()?void 0:mt(e.closeButtonColor),(()=>{e.on(r)}));r.appendChild(l),n&&(l.style.zIndex=n+2);const c=document.createElement("div");c.className="ab-message-text";const u=(e.messageAlignment||e.ke).toLowerCase();c.className+=" "+u+"-aligned";let h=!1;const p=document.createElement("div");if(p.className="ab-image-area",e.imageUrl){if(e.cropType===$e.CropType.CENTER_CROP){const t=document.createElement("span");t.className="ab-center-cropped-img",t.style.backgroundImage="url("+e.imageUrl+")",t.setAttribute("role","img"),t.setAttribute("aria-label","Modal Image"),e.xe(t),p.appendChild(t)}else{const t=document.createElement("img");t.setAttribute("src",e.imageUrl),e.xe(t),h=!0,t.onload=o,setTimeout(o,1e3),p.appendChild(t)}r.appendChild(p),c.className+=" ab-with-image"}else if(e.icon){p.className+=" ab-icon-area";const t=document.createElement("span");t.className="ab-icon",e.sn()||(t.style.backgroundColor=mt(e.iconBackgroundColor),t.style.color=mt(e.iconColor));const a=document.createElement("i");a.className="fa",a.appendChild(document.createTextNode(e.icon)),a.setAttribute("aria-hidden",!0),t.appendChild(a),p.appendChild(t),r.appendChild(p),c.className+=" ab-with-icon"}if(ze(c,"touchstart",(function(){})),e.header&&e.header.length>0){const t=document.createElement("h1");t.className="ab-message-header",e.ze=s.nt.et(),t.id=e.ze;const a=(e.headerAlignment||$e.TextAlignment.CENTER).toLowerCase();t.className+=" "+a+"-aligned",e.sn()||(t.style.color=mt(e.headerTextColor)),t.appendChild(document.createTextNode(e.header)),c.appendChild(t)}return c.appendChild(e.Me()),r.appendChild(c),h||o(),e.mn=r,r}(e,t,a,i,n);if(e instanceof He||e instanceof We){const a=e instanceof He?"ab-fullscreen":"ab-modal";o.className+=` ${a} ab-centered`,Ct(e,t,o,i),Dt(o),Nt(e.ze,o)}else if(e instanceof Je){o.className+=" ab-slideup";const t=o.getElementsByClassName("ab-close-button")[0];if(null!=t){const a=Be("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",e.sn()?void 0:mt(e.closeButtonColor));a.setAttribute("class","ab-chevron"),t.appendChild(a)}let a,i;Re(o,Te,(e=>{o.className+=" ab-swiped-left",t.onclick(e)})),Re(o,Ie,(e=>{o.className+=" ab-swiped-right",t.onclick(e)})),e.slideFrom===$e.SlideFrom.TOP?(a=Ce,i=" ab-swiped-up"):(a=_e,i=" ab-swiped-down"),Re(o,a,(e=>{o.className+=i,t.onclick(e)}))}return o}function Tt(e){if(!Lt.rr())return!1;if(!(e instanceof $e||e instanceof De))return s.D.error("inAppMessage must be an InAppMessage object"),!1;const t=e instanceof De?s.A.ro:s.A.Pe;return lt.m().G(e,t).S}function It(e,t,a){if(!Lt.rr())return;if(dt(),null==e)return!1;if(e instanceof De)return s.D.info("User received control for a multivariate test, logging to Braze servers."),Tt(e),!0;if(!(e instanceof $e))return!1;const i=lt.m();e.bi();const n=e instanceof je;if(n&&!e.trusted&&!Lt.tr())return s.D.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),i.Fe(e.triggerId,$e.Ge.fi),!1;if(null==t&&(t=document.body),e.we()&&t.querySelectorAll(".ab-modal-interactions").length>0)return s.D.info(`Cannot show in-app message ${e.message} because another message is being shown.`),i.Fe(e.triggerId,$e.Ge.gi),!1;if(wt.so()){const t=wt.io();if(t===ft&&e.orientation===$e.Orientation.LANDSCAPE||t===vt&&e.orientation===$e.Orientation.PORTRAIT){const a=t===ft?"portrait":"landscape",n=e.orientation===$e.Orientation.PORTRAIT?"portrait":"landscape";return s.D.info(`Not showing ${n} in-app message ${e.message} because the screen is currently ${a}`),i.Fe(e.triggerId,$e.Ge.Hi),!1}}if(!Lt.tr()){let t=!1;if(e.buttons&&e.buttons.length>0){const a=e.buttons;for(let e=0;e<a.length;e++)if(a[e].clickAction===$e.ClickAction.URI){t=At(a[e].uri)}}else e.clickAction===$e.ClickAction.URI&&(t=At(e.uri));if(t)return s.D.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),i.Fe(e.triggerId,$e.Ge.fi),!1}const r=document.createElement("div");if(r.className="ab-iam-root v3",r.className+=function(e){let t="";return e.animateIn&&(t+=" ab-animate-in"),e.animateOut&&(t+=" ab-animate-out"),e instanceof He?t+=" ab-effect-fullscreen":e instanceof je?t+=" ab-effect-html":e instanceof We?t+=" ab-effect-modal":e instanceof Je&&(t+=" ab-effect-slide"),t}(e),r.setAttribute("role","complementary"),e.an()&&(r.id=e.htmlId),Lt.nn(Bt.no)&&(r.style.zIndex=Lt.nn(Bt.no)+1),t.appendChild(r),e.sn()){const t=document.createElement("style");t.innerHTML=e.css,t.id=e.rn(),null!=Lt.nn(Bt.ao)&&t.setAttribute("nonce",Lt.nn(Bt.ao)),document.getElementsByTagName("head")[0].appendChild(t)}const o=e instanceof Je,l=_t(e,(()=>{Promise.resolve().then((function(){return qa})).then((e=>e.showFeed()))}),(t=>{if(e.we()&&e.ll()){const a=document.createElement("div");if(a.className="ab-page-blocker",e.sn()||(a.style.backgroundColor=mt(e.frameColor)),Lt.nn(Bt.no)&&(a.style.zIndex=Lt.nn(Bt.no)),r.appendChild(a),!Lt.nn(Bt.Ri)){const i=(new Date).valueOf();a.onclick=a=>{(new Date).valueOf()-i>$e.Wi&&(e.on(t),a.stopPropagation())}}r.appendChild(t),t.focus(),e.Si(r)}else if(o){const a=document.querySelectorAll(".ab-slideup");let i=null;for(let e=a.length-1;e>=0;e--)if(a[e]!==t){i=a[e];break}if(e.slideFrom===$e.SlideFrom.TOP){let e=0;null!=i&&(e=i.offsetTop+i.offsetHeight),t.style.top=Math.max(e,0)+"px"}else{let e=0;null!=i&&(e=(window.innerHeight||document.documentElement.clientHeight)-i.offsetTop),t.style.bottom=Math.max(e,0)+"px"}}else if(n&&!Lt.nn(Bt.Ri)){const a=e;t.contentWindow.addEventListener("keydown",(function(e){e.keyCode===Fe&&a.closeMessage()}))}Tt(e),e.dismissType===$e.DismissType.AUTO_DISMISS&&setTimeout((()=>{r.contains(t)&&e.on(t)}),e.duration),"function"==typeof a&&a()}),Lt.nn(Bt.lo),Lt.nn(Bt.no),Lt.nn(Bt.ao));return(n||o)&&(r.appendChild(l),e.Si(r)),!0}function Ot(e){if(Lt.rr())return"function"!=typeof e?null:lt.m()._e((function(t){return e(t[0]),t.slice(1)}))}class zt{constructor(e,t,a,i,s){this.triggerId=e,this.ni=t,this.si=a,this.oi=i,this.ai=s}static fromJson(e,t,a,i,s){return null==e||null==e.trigger_id?null:new zt(e.trigger_id,t,a,i,s)}}class Pt extends oe{constructor(e,t,a,i,s){super(),this.Oh=e,this.vt=t,this.h=a,this.Is=i,this.Uh=s,this.Kh=[],this.Qh=[],this.Vh=null,this.Xh={},this.Yh={},this.Zh(),this.tg()}ig(){this.Vh=this.h.I(se.q.Da)||this.Vh,this.Xh=this.h.I(se.q.Ga)||this.Xh,this.Yh=this.h.I(se.q.Ya)||this.Yh;for(let e=0;e<this.sg.length;e++){const t=this.sg[e];null!=this.Yh[t.id]&&t.Bh(this.Yh[t.id])}}Zh(){this.eg=this.h.I(se.q.Ka)||0;const e=this.h.I(se.q.Ia)||[],t=[];for(let a=0;a<e.length;a++)t.push(rt.An(e[a]));this.sg=t,this.ig()}tg(){const e=this,t=function(t,a,i,s,n){return function(){e.hg(t,a,i,s,n)}},a={};for(let e=0;e<this.sg.length;e++)a[this.sg[e].id]=this.sg[e];let i=!1;for(let e=0;e<this.sg.length;e++){const s=this.sg[e];if(null!=this.Xh[s.id]){const e=this.Xh[s.id],n=[];for(let i=0;i<e.length;i++){const r=e[i],l=s.Jh(r.oi);if(l>0){let e,i;n.push(r),null!=r.og&&(e=r.og),null!=r.ng&&U.ya(r.ng)&&(i=U.An(r.ng));const c=[];if(o(r.lg))for(let e=0;e<r.lg.length;e++){const t=a[r.lg[e]];null!=t&&c.push(t)}this.Qh.push(setTimeout(t(s,r.oi,e,i,c),l))}}this.Xh[s.id].length>n.length&&(this.Xh[s.id]=n,i=!0,0===this.Xh[s.id].length&&delete this.Xh[s.id])}}i&&this.h.B(se.q.Ga,this.Xh)}ag(){const e=[];for(let t=0;t<this.sg.length;t++)e.push(this.sg[t].ss());this.eg=(new Date).valueOf(),this.h.B(se.q.Ia,e),this.h.B(se.q.Ka,this.eg)}gg(){(this.h.I(se.q.Ka)||0)>this.eg?this.Zh():this.ig()}_s(e){let t=!1;if(null!=e&&e.triggers){this.ig();const a={},i={};this.sg=[];for(let s=0;s<e.triggers.length;s++){const n=rt.fromJson(e.triggers[s]);null!=this.Yh[n.id]&&(n.Bh(this.Yh[n.id]),a[n.id]=this.Yh[n.id]),null!=this.Xh[n.id]&&(i[n.id]=this.Xh[n.id]);for(let e=0;e<n.Th.length;e++)if(n.Th[e].$a(st.ks,null)){t=!0;break}null!=n&&this.sg.push(n)}p(this.Yh,a)||(this.Yh=a,this.h.B(se.q.Ya,this.Yh)),p(this.Xh,i)||(this.Xh=i,this.h.B(se.q.Ga,this.Xh)),this.ag(),t&&(s.D.info("Trigger with test condition found, firing test."),this.je(st.ks)),this.je(st.OPEN);const n=this.Kh;this.Kh=[];for(let e=0;e<n.length;e++)this.je.apply(this,n[e])}}async hg(e,t,a,i,n){const r=i=>{this.ig();const n=(new Date).valueOf();if(!e.Lh(t))return!1===navigator.onLine&&e.type===rt.ii.ei&&i.imageUrl?(s.D.info(`Not showing ${e.type} trigger action ${e.id} due to offline state.`),void this.Uh.Fe(e.id,$e.Ge.Fi)):void(e.Mh(n)&&this.fg(e,n,a)?(this.vt.Nt([i]),this.cg(e,n)):s.D.info(`Not displaying trigger ${e.id} because display time fell outside of the acceptable time window.`));e.type===rt.ii.Rh?this.Uh.Fe(e.id,$e.Ge.Ze):this.Uh.Fe(e.id,$e.Ge.Bi)},o=()=>{this.ig();const r=n.pop();if(null!=r)if(this.ug(r,t,a,i,n),r.Lh(t)){let e=`Server aborted in-app message display, but the timeout on fallback trigger ${r.id} has already elapsed.`;n.length>0&&(e+=" Continuing to fall back."),s.D.info(e),this.Uh.Fe(r.id,$e.Ge.Bi),o()}else{s.D.info(`Server aborted in-app message display. Falling back to lower priority ${r.type} trigger action ${e.id}.`);const o=1e3*r.Ph-((new Date).valueOf()-t);o>0?this.Qh.push(setTimeout((()=>{this.hg(r,t,a,i,n)}),o)):this.hg(r,t,a,i,n)}};switch(e.type){case rt.ii.ei:const n=Ke(e.data);if(null==n){s.D.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`),this.Uh.Fe(e.id,$e.Ge.ri);break}let l=await this.Uh.Ke(n);if(l){s.D.error(l),o();break}r(n);break;case rt.ii.Rh:const c=zt.fromJson(e.data,r,o,t,e.ai);if(null==c){s.D.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`),this.Uh.Fe(e.id,$e.Ge.ri);break}this.Uh.We(c,a,i);break;default:s.D.error(`Trigger ${e.id} was of unexpected type ${e.type}, ignoring.`),this.Uh.Fe(e.id,$e.Ge.ri)}}je(e,t,a){if(!r(st,e,"Cannot fire trigger action.","TriggerEvents"))return;if(this.Is.bl())return s.D.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.Kh.push(arguments);this.gg();const i=(new Date).valueOf(),n=i-this.Vh;let o=!0,l=!0;const c=[];for(let a=0;a<this.sg.length;a++){const s=this.sg[a],n=i+1e3*s.Ph;if(s.Mh(n)&&(null==s.startTime||s.startTime<=i)&&(null==s.endTime||s.endTime>=i)){let a=!1;for(let i=0;i<s.Th.length;i++)if(s.Th[i].$a(e,t)){a=!0;break}a&&(o=!1,this.fg(s,n,e)&&(l=!1,c.push(s)))}}if(o)return void s.D.info(`Trigger event ${e} did not match any trigger conditions.`);if(l)return void s.D.info(`Ignoring ${e} trigger event because a trigger was displayed ${n/1e3}s ago.`);c.sort(((e,t)=>e.priority-t.priority));const u=c.pop();null!=u&&(s.D.info(`Firing ${u.type} trigger action ${u.id} from trigger event ${e}.`),this.ug(u,i,e,a,c),0===u.Ph?this.hg(u,i,e,a,c):this.Qh.push(setTimeout((()=>{this.hg(u,i,e,a,c)}),1e3*u.Ph)))}changeUser(e){if(this.sg=[],this.h.$s(se.q.Ia),!e){this.Kh=[],this.Vh=null,this.Yh={},this.Xh={};for(let e=0;e<this.Qh.length;e++)clearTimeout(this.Qh[e]);this.Qh=[],this.h.$s(se.q.Da),this.h.$s(se.q.Ya),this.h.$s(se.q.Ga)}}clearData(){this.sg=[],this.Vh=null,this.Yh={},this.Xh={};for(let e=0;e<this.Qh.length;e++)clearTimeout(this.Qh[e]);this.Qh=[]}fg(e,t,a){if(null==this.Vh)return!0;if(a===st.ks)return s.D.info("Ignoring minimum interval between trigger because it is a test type."),!0;let i=e.Ih;return null==i&&(i=this.Oh),t-this.Vh>=1e3*i}ug(e,t,a,i,s){this.ig(),this.Xh[e.id]=this.Xh[e.id]||[];const n={};let r;n.oi=t,n.og=a,null!=i&&(r=i.ss()),n.ng=r;const o=[];for(let e=0;e<s.length;e++)o.push(s[e].id);n.lg=o,this.Xh[e.id].push(n),this.h.B(se.q.Ga,this.Xh)}cg(e,t){this.ig(),e.Bh(t),this.Vh=t,this.h.B(se.q.Da,t),this.Yh[e.id]=t,this.h.B(se.q.Ya,this.Yh)}}const Mt={t:!1,provider:null,er:()=>(Mt.init(),Mt.provider),rg:()=>{if(!Mt.provider){const e=Lt.nn(Bt.po);Mt.provider=new Pt(null!=e?e:30,lt.m().De(),Lt.l(),Lt.mr(),lt.m()),Lt.ar(Mt.provider)}},init:()=>{Mt.t||(Mt.rg(),Lt.u(Mt),Mt.t=!0)},destroy:()=>{Mt.provider=null,Mt.t=!1}};class Ut{constructor(e,t,a,i,s){this.endpoint=e||null,this.Wn=t||null,this.publicKey=a||null,this.tl=i||null,this.oh=s||null}ss(){return{e:this.endpoint,c:this.Wn,p:this.publicKey,u:this.tl,v:this.oh}}static An(e){return new Ut(e.e,f(e.c),e.p,e.u,e.v)}}class Rt{constructor(e,t){this.wt=e,this.h=t}getUserId(){const e=this.h._r(se.Cr.Ur);if(null==e)return null;let t=e.Ir,a=B(t);if(a>ie.ee){for(;a>ie.ee;)t=t.slice(0,t.length-1),a=B(t);e.Ir=t,this.h.Lr(se.Cr.Ur,e)}return t}Er(e){const t=null==this.getUserId();this.h.Lr(se.Cr.Ur,new R(e)),t&&this.h.Gr(e)}setCustomUserAttribute(e,t){if(this.wt.Hr(e))return s.D.info('Custom Attribute "'+e+'" is blocklisted, ignoring.'),!1;const a={};return a[e]=t,this.Jr(ie.Kr,a,!0)}Jr(e,t,a,i){const n=this.h.Mr(this.getUserId(),e,t);return!i&&n&&s.D.info(`Logged${a?" custom":""} attribute ${e} with value ${t}`),n}dn(e,t,a,i,n){this.Jr("push_token",e,!1,!0),this.Jr("custom_push_public_key",a,!1,!0),this.Jr("custom_push_user_auth",i,!1,!0),this.Jr("custom_push_vapid_public_key",n,!1,!0);const r=s.Ft.xt,o=new s.qt(r,s.D),l=new Ut(e,t,a,i,n);this.h.B(se.q.Nn,l.ss()),o.setItem(r.Pt.Nr,r.se,!0)}pn(e){if(this.Jr("push_token",null,!1,!0),this.Jr("custom_push_public_key",null,!1,!0),this.Jr("custom_push_user_auth",null,!1,!0),this.Jr("custom_push_vapid_public_key",null,!1,!0),e){const e=s.Ft.xt,t=new s.qt(e,s.D);this.h.B(se.q.Nn,!1),t.setItem(e.Pt.Nr,e.se,!1)}}}const Bt={Vn:"allowCrawlerActivity",$n:"baseUrl",Yn:"noCookies",Xn:"devicePropertyAllowlist",ra:"disablePushTokenMaintenance",Zn:"enableLogging",ho:"enableSdkAuthentication",ta:"manageServiceWorkerExternally",po:"minimumIntervalBetweenTriggerActionsInSeconds",Eo:"sessionTimeoutInSeconds",_o:"appVersion",ea:"serviceWorkerLocation",na:"safariWebsitePushId",zn:"localization",ao:"contentSecurityNonce",Io:"enableHtmlInAppMessages",Ao:"allowUserSuppliedJavascript",no:"inAppMessageZIndex",lo:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",Ri:"requireExplicitInAppMessageDismissal",So:"doNotLoadFontAwesome",No:"sdkFlavor"};class qt{constructor(){this.wo=!1,this.To=!1,this.Oo=new x,this.vo=new x,this.Co={},this.Lo=[],this.Po=[],this.Xs=[],this.Ro="4.0.5"}Mo(e){this.Oo.Et(e)}Ci(e){this.vo.Et(e)}initialize(e,t){if(this.yo())return s.D.info("Braze has already been initialized with an API key."),!0;this.Co=t||{};let a=this.nn(Bt.Zn);const i=St(wt.Pn());if(i&&"true"===i.brazeLogging&&(a=!0),s.D.init(a),s.D.info(`Initialization Options: ${JSON.stringify(this.Co,null,2)}`),null==e||""===e||"string"!=typeof e)return s.D.error("Braze requires a valid API key to be initialized."),!1;this.yi=e;let l=this.nn(Bt.$n);if(null==l||""===l||"string"!=typeof l)return s.D.error("Braze requires a valid baseUrl to be initialized."),!1;if(l=l.replace(/(\.[a-z]+)[^\.]*$/i,"$1/api/v3"),0!==l.indexOf("http")&&(l="https://"+l),this.Do=l,M.jo&&!this.nn(Bt.Vn))return s.D.info("Ignoring activity from crawler bot "+navigator.userAgent),this.To=!0,!1;const c=this.nn(qt.Yn)||!1;if(this.h=Ee.zo(e,c),new ne.ne(null,!0).lr(se.ae))return s.D.info("Ignoring all activity due to previous opt out"),this.To=!0,!1;for(const e of h(this.Co))-1===n(s.Uo).indexOf(e)&&s.D.warn(`Ignoring unknown initialization option '${e}'.`);const u=["mparticle","wordpress","tealium"];if(null!=this.nn(Bt.No)){const e=this.nn(Bt.No);-1!==u.indexOf(e)?this.Bo=e:s.D.error("Invalid sdk flavor passed: "+e)}let p=this.nn(s.Uo.Xn);if(null!=p)if(o(p)){const e=[];for(let t=0;t<p.length;t++)r(le,p[t],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&e.push(p[t]);p=e}else s.D.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),p=null;this.ji=new ue(this.h,p),this.wt=new Se(this.h),this.v=new Rt(this.wt,this.h),this.j=new Ae(this.h,this.v,this.wt,this.nn(Bt.Eo));const d=new x;return this.Wo=new re(this.h,this.nn(Bt.ho),d),this.Ut(d),this.jt=new fe(this.ji,this.h,this.Wo,this.v,this.j,this.wt,this.yi,this.Do,this.Ro,this.Bo,this.nn(Bt._o)),this.Is=new ye(this.yi,this.Do,this.j,this.ji,this.v,this.wt,this.h,(e=>{if(this.yo())for(const t of this.re())t._s(e)}),this.Wo,this.jt),this.Is.initialize(),s.D.info(`Initialized for the Braze backend at "${this.nn(Bt.$n)}" with API key "${this.yi}".`),null!=this.nn(Bt.Io)&&he("enableHtmlInAppMessages","initialization option","allowUserSuppliedJavascript"),Mt.init(),this.Oo.Nt(this.Co),this.wo=!0,!0}destroy(e){if(s.D.destroy(),this.yo()){this.vo.Nt(),this.vo.removeAllSubscriptions();for(const e of this.Lo)e.destroy();this.Lo=[];for(const e of this.Po)e.clearData(!1);this.Po=[],this.removeAllSubscriptions(),this.Xs=[],this.Is.destroy(),this.Is=null,this.Wo=null,this.ji=null,this.jt=null,this.wt=null,this.j=null,this.v=null,this.Co={},this.Bo=void 0,this.wo=!1,this.To=!1,e&&(this.h=null)}}rr(){if(this.Vo())return!1;if(!this.yo())throw new Error("Braze must be initialized before calling methods.");return!0}aa(){return this.yi}ti(){return this.Wo}Js(){return this.Do}ce(){return this.ji}nr(){return this.jt}nn(e){return this.Co[e]}re(){return this.Po}mr(){return this.Is}ir(){return this.wt}g(){return this.j}l(){return this.h}gr(){if(this.v&&this.Is)return new ie(this.v,this.Is)}p(){return this.v}tr(){return!0===this.nn(Bt.Ao)||!0===this.nn(Bt.Io)}u(e){let t=!1;for(const a of this.Lo)a===e&&(t=!0);t||this.Lo.push(e)}ar(e){let t=!1;for(const a of this.Po)a.constructor===e.constructor&&(t=!0);e instanceof oe&&!t&&this.Po.push(e)}Ut(e){e instanceof x&&this.Xs.push(e)}removeAllSubscriptions(){if(this.rr())for(const e of this.Xs)e.removeAllSubscriptions()}removeSubscription(e){if(this.rr())for(const t of this.Xs)t.removeSubscription(e)}le(e){this.To=e}yo(){return this.wo}Vo(){return this.To}}const Lt=new qt,Gt={G:(e,t,a)=>{const i=new xe,n=Lt.g();if(!n)return s.D.info(`Not logging event with type "${e}" because the current session ID could not be found.`),i;const r=n.mo();return i.ve.push(new U(a||Lt.p().getUserId(),e,(new Date).valueOf(),r,t)),i.S=Lt.l().bo(i.ve),i}};var Ft=Gt;class $t{constructor(e,t,a){this.h=e,this.j=t,this.v=a}C(e,t){const a=new xe;if(e.k(),null==e.url||""===e.url)return s.D.info(`Card ${e.id} has no url. Not logging click to Braze servers.`),a;if(t){const t=this.h.I(se.q.$)||{};t[e.id]=!0,this.h.B(se.q.$,t)}const i=this.N([e]);if(null==i)return a;const n=t?s.A._:s.A.F;return Ft.G(n,i)}H(e){const t=new xe;if(!e.J())return s.D.info(`Card ${e.id} refused this dismissal. Ignoring analytics event.`),t;const a=this.h.I(se.q.K)||{};a[e.id]=!0,this.h.B(se.q.K,a);const i=this.N([e]);return null==i?t:Ft.G(s.A.L,i)}M(e,t){const a=new xe(!0),i=[],n=[];let r;r=t?this.h.I(se.q.O)||{}:this.h.I(se.q.P)||{};for(const t of e)t.R(),t instanceof E?n.push(t):i.push(t),r[t.id]=!0;const o=this.N(i),l=this.N(n);if(null==o&&null==l)return a.S=!1,a;if(t?this.h.B(se.q.O,r):this.h.B(se.q.P,r),null!=o){const e=t?s.A.T:s.A.U,i=Ft.G(e,o);a.V(i)}if(null!=l&&t){const e=Ft.G(s.A.W,l);a.V(e)}return a}N(e){let t=null;for(let a=0;a<e.length;a++)null!=e[a].id&&""!==e[a].id&&(t=t||{},t.ids=t.ids||[],t.ids.push(e[a].id));return t}}const jt={t:!1,i:null,m:()=>(jt.o(),jt.i||(jt.i=new $t(Lt.l(),Lt.g(),Lt.p())),jt.i),o:()=>{jt.t||(Lt.u(jt),jt.t=!0)},destroy:()=>{jt.i=null,jt.t=!1}};function Xt(e,t){return!!Lt.rr()&&(e instanceof y?jt.m().C(e,t).S:(s.D.error("card must be a Card object"),!1))}function Ht(e){return!!Lt.rr()&&(e instanceof y?jt.m().H(e).S:(s.D.error("card must be a Card object"),!1))}function Wt(e,t){if(!Lt.rr())return!1;if(!o(e))return s.D.error("cards must be an array"),!1;for(const t of e)if(!(t instanceof y))return s.D.error("Each card in cards must be a Card object"),!1;return jt.m().M(e,t).S}class Jt{constructor(e,t){this.cards=e,this.lastUpdated=t}getUnreadCardCount(){let e=0;for(const t of this.cards)t.viewed||t instanceof E||e++;return e}dr(){throw new Error("Must be implemented in a subclass")}logCardImpressions(){throw new Error("Must be implemented in subclass")}logCardClick(){throw new Error("Must be implemented in subclass")}sr(){throw new Error("Must be implemented in subclass")}}function Kt(e,t,a,i,n,r,o,l,c,u,h,p,d,b,m,g,f,v){let w;if(t===y.es.Ct||t===y.es.dt)w=new A(e,a,i,n,r,o,l,c,u,h,p,d,b,m,g,f);else if(t===y.es.st)w=new S(e,a,i,n,r,o,l,c,u,h,p,d,b,m,g,f);else if(t===y.es.rs)w=new k(e,a,n,o,l,c,u,h,p,d,b,m,g,f);else{if(t!==y.es.Rt)return s.D.error("Ignoring card with unknown type "+t),null;w=new E(e,a,l,u,b,m)}return v&&(w.test=v),w}function Yt(e){if(e[y.ct.At])return null;const t=e[y.ct.ns],a=e[y.ct.ts],i=e[y.ct.ls],s=e[y.ct.it],n=e[y.ct.os],r=e[y.ct.ht],o=m(e[y.ct.us]),l=o;let c;return c=e[y.ct.ps]===y.Dt?null:m(e[y.ct.ps]),Kt(t,a,i,s,n,r,l,o,null,c,e[y.ct.URL],e[y.ct.bs],e[y.ct.fs],e[y.ct.xs],e[y.ct.js],e[y.ct.zs],e[y.ct.gs],e[y.ct.ks]||!1)}function Vt(e){return Kt(e.id,e.type,e.viewed,e.title,e.image,e.description,m(e.created),m(e.updated),e.categories,m(e.expires_at),e.url,e.domain,e.aspect_ratio,e.extras,!1,!1)}function Zt(e){return Kt(e[y.hs.ns],e[y.hs.ts],e[y.hs.ls],e[y.hs.it],e[y.hs.os],e[y.hs.ht],f(e[y.hs.cs]),f(e[y.hs.us]),e[y.hs.ds],f(e[y.hs.ps]),e[y.hs.URL],e[y.hs.bs],e[y.hs.fs],e[y.hs.xs],e[y.hs.js],e[y.hs.zs],e[y.hs.gs],e[y.hs.ks]||!1)||void 0}Jt.ur=6e4,Jt.Oi=500,Jt.uo=1e4;class Qt extends oe{constructor(e,t,a,i,n){super(),this.v=e,this.h=t,this.wt=a,this.gt=i,this.jt=n,this.vt=new x,Lt.Ut(this.vt),this.yt=0,this.kt=0,this.zt();const r=s.Ft.xt;new s.qt(r,s.D).Jt(r.Pt.Mt,(e=>{this.$t(e)}))}Bt(){return this.Gt}Ht(e){this.Gt=e}Kt(){return this.Qt}Vt(e){this.Qt=e}zt(){const e=this.h.I(se.q.Wt)||[],t=[];for(let a=0;a<e.length;a++){const i=Zt(e[a]);null!=i&&t.push(i)}this.Xt=this.Yt(this.Zt(t,!1)),this.yt=this.h.I(se.q.Cs)||this.yt,this.kt=this.h.I(se.q.ws)||this.kt}vs(e,t,a,i){let s;if(t){s=[];for(const e of this.Xt)e.test&&s.push(e)}else s=this.Xt.slice();for(let a=0;a<e.length;a++){const i=e[a];let n=null;for(let e=0;e<this.Xt.length;e++)if(i.id===this.Xt[e].id){n=this.Xt[e];break}if(t){const e=Yt(i);null!=n&&n.viewed&&(e.viewed=!0),null!=e&&s.push(e)}else if(null==n){const e=Yt(i);null!=e&&s.push(e)}else if(!n.St(i))for(let e=0;e<s.length;e++)if(i.id===s[e].id){s.splice(e,1);break}}this.Xt=this.Yt(this.Zt(s,t)),this.Ss(),this.yt=a||0,this.h.B(se.q.Cs,this.yt),this.kt=i||0,this.h.B(se.q.ws,this.kt)}_s(e){if(this.Us()&&null!=e&&e.cards){const t=e.full_sync;t||this.zt(),this.vs(e.cards,t,e.last_full_sync_at,e.last_card_updated_at),this.vt.Nt(this.ys(!0))}}$t(e){if(!this.Us())return;this.zt();const t=this.Xt.slice(),a=this.v.getUserId();for(let i=0;i<e.length;i++)if(a===e[i].userId||null==a&&null==e[i].userId){const a=e[i].card;let s=null;for(let e=0;e<this.Xt.length;e++)if(a.id===this.Xt[e].id){s=this.Xt[e];break}if(null==s){const e=Yt(a);null!=e&&t.push(e)}else if(!s.St(a))for(let e=0;e<t.length;e++)if(a.id===t[e].id){t.splice(e,1);break}}this.Xt=this.Yt(this.Zt(t,!1)),this.Ss(),this.vt.Nt(this.ys(!0))}Zt(e,t){const a=this.h.I(se.q.$)||{},i=this.h.I(se.q.O)||{},s=this.h.I(se.q.K)||{},n={},r={},o={};for(let t=0;t<e.length;t++)a[e[t].id]&&(e[t].clicked=!0,n[e[t].id]=!0),i[e[t].id]&&(e[t].viewed=!0,r[e[t].id]=!0),s[e[t].id]&&(e[t].dismissed=!0,o[e[t].id]=!0);return t&&(this.h.B(se.q.$,n),this.h.B(se.q.O,r),this.h.B(se.q.K,o)),e}Yt(e){const t=[],a=new Date,i=this.h.I(se.q.K)||{};let n=!1;for(let r=0;r<e.length;r++){const o=e[r].url;!this.gt&&o&&At(o)?s.D.error(`Card with url ${o} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`):(null==e[r].expiresAt||e[r].expiresAt>=a)&&!e[r].dismissed?t.push(e[r]):(i[e[r].id]=!0,n=!0)}return n&&this.h.B(se.q.K,i),t}Ss(){const e=[];for(let t=0;t<this.Xt.length;t++)e.push(this.Xt[t].ss());this.h.B(se.q.Wt,e)}Ts(e,t){if(!this.Us())return void(this.Ds||(this.Ds=this.wt.Rs((()=>{this.Ts(e,t)}))));const a=this.jt.Ls({},!0);a.last_full_sync_at=this.yt,a.last_card_updated_at=this.kt;const i=this.jt.Ns(a,!0);this.jt.As(a,(()=>{ve({url:this.jt.Js()+"/content_cards/sync",data:a,headers:i,S:s=>{this.jt.qs(a,s,i)?(this.jt.Es(),this._s(s),"function"==typeof e&&e()):"function"==typeof t&&t()},error:e=>{this.jt.Ms(e,"retrieving content cards"),"function"==typeof t&&t()}})}))}ys(e){e||this.zt();const t=this.Yt(this.Xt);t.sort(((e,t)=>e.pinned&&!t.pinned?-1:t.pinned&&!e.pinned?1:e.updated>t.updated?-1:t.updated>e.updated?1:0));let a=Math.max(this.kt||0,this.yt||0);return 0===a&&(a=void 0),this.h.I(se.q.ws)===this.kt&&void 0===a&&(a=this.kt),new aa(t,m(a))}Ps(e){return this.vt.Et(e)}changeUser(e){e||(this.Xt=[],this.vt.Nt(new aa(this.Xt.slice(),null)),this.h.$s(se.q.Wt),this.h.$s(se.q.$),this.h.$s(se.q.O),this.h.$s(se.q.K)),this.yt=0,this.kt=0,this.h.$s(se.q.Cs),this.h.$s(se.q.ws)}clearData(e){this.yt=0,this.kt=0,this.Xt=[],this.vt.Nt(new aa(this.Xt.slice(),null)),e&&(this.h.$s(se.q.Wt),this.h.$s(se.q.$),this.h.$s(se.q.O),this.h.$s(se.q.K),this.h.$s(se.q.Cs),this.h.$s(se.q.ws))}Us(){return!!this.wt.Bs()||(0!==this.wt.Gs()&&this.Hs(),!1)}Hs(){this.vt.Nt(new aa([],(new Date).valueOf())),this.h.$s(se.q.Wt)}}const ea={t:!1,provider:null,er:()=>(ea.o(),ea.provider||(ea.provider=new Qt(Lt.p(),Lt.l(),Lt.ir(),Lt.tr(),Lt.nr()),Lt.ar(ea.provider)),ea.provider),o:()=>{ea.t||(Lt.u(ea),ea.t=!0)},destroy:()=>{ea.provider=null,ea.t=!1}};function ta(e,t){if(Lt.rr())return ea.er().Ts(e,t)}class aa extends Jt{constructor(e,t){super(e,t)}getUnviewedCardCount(){return super.getUnreadCardCount()}logCardImpressions(e){Wt(e,!0)}logCardClick(e){Xt(e,!0)}sr(){ta()}dr(){return!0}}function ia(e){return null!=e&&!!e.getAttribute("data-ab-had-top-impression")}function sa(e){null!=e&&e.setAttribute("data-ab-had-top-impression",!0)}function na(e){return null!=e&&!!e.getAttribute("data-ab-had-bottom-impression")}function ra(e){null!=e&&e.setAttribute("data-ab-had-bottom-impression",!0)}function oa(e){if(null!=e){const t=e.querySelectorAll(".ab-unread-indicator")[0];null!=t&&(t.className+=" read")}}function la(e){return e.getAttribute("data-ab-card-id")}function ca(e,t){const a=t.querySelectorAll(".ab-image-area");let i,s=0;a.length>0&&(s=a[0].offsetWidth);for(const t of e)if(i=t.X,i&&t.imageUrl&&!isNaN(t.aspectRatio)){const e=s/t.aspectRatio;e&&(i.style.height=`${e}px`)}}function ua(e,t,a){const i=document.createElement("div");i.className="ab-card ab-effect-card "+e.Y,i.setAttribute("data-ab-card-id",e.id),i.setAttribute("role","article"),i.setAttribute("tabindex","0");const n=e.url&&""!==e.url,r=s=>(oa(i),n&&(t(e),yt(e.url,s,a)),!1);if(e.pinned){const e=document.createElement("div");e.className="ab-pinned-indicator";const t=document.createElement("i");t.className="fa fa-star",e.appendChild(t),i.appendChild(e)}if(e.imageUrl&&""!==e.imageUrl){const t=document.createElement("div");t.className="ab-image-area";const a=document.createElement("img");if(a.setAttribute("src",e.imageUrl),a.onload=()=>{i.style.height="auto"},function(e,t){let a="";e.title||e.description||(a="Feed Image"),t.setAttribute("alt",a)}(e,a),t.appendChild(a),i.className+=" with-image",n&&!e.Z){const a=document.createElement("a");a.setAttribute("href",e.url),a.onclick=r,a.appendChild(t),i.appendChild(a)}else i.appendChild(t)}const o=document.createElement("div");if(o.className="ab-card-body",e.dismissible){e.tt=()=>Ht(e);const t=bt("Dismiss Card",void 0,e.dismissCard.bind(e));i.appendChild(t),Re(o,Te,(e=>{i.className+=" ab-swiped-left",t.onclick(e)})),Re(o,Ie,(e=>{i.className+=" ab-swiped-right",t.onclick(e)}))}const l=e.title&&""!==e.title;if(l){const t=document.createElement("h1");if(t.className="ab-title",t.id=s.nt.et(),i.setAttribute("aria-labelledby",t.id),n){const a=document.createElement("a");a.setAttribute("href",e.url),a.onclick=r,a.appendChild(document.createTextNode(e.title)),t.appendChild(a)}else t.appendChild(document.createTextNode(e.title));o.appendChild(t)}const c=document.createElement("div");if(c.className=l?"ab-description":"ab-description ab-no-title",c.id=s.nt.et(),i.setAttribute("aria-describedby",c.id),c.appendChild(document.createTextNode(e.description)),n){const t=document.createElement("div");t.className="ab-url-area";const a=document.createElement("a");a.setAttribute("href",e.url),a.appendChild(document.createTextNode(e.linkText)),a.onclick=r,t.appendChild(a),c.appendChild(t)}o.appendChild(c),i.appendChild(o);const u=document.createElement("div");return u.className="ab-unread-indicator",e.viewed&&(u.className+=" read"),i.appendChild(u),e.X=i,i}aa.ur=6e4;var ha={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"ليس لدينا أي تحديث. يرجى التحقق مرة أخرى لاحقاً",FEED_TIMEOUT_MESSAGE:"يرجى تكرار المحاولة لاحقا"},cs:{NO_CARDS_MESSAGE:"V tuto chvíli pro vás nemáme žádné aktualizace.<br/>Zkontrolujte prosím znovu později.",FEED_TIMEOUT_MESSAGE:"Prosím zkuste to znovu později."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Prøv venligst senere.",FEED_TIMEOUT_MESSAGE:"Prøv venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfügbar.<br/>Bitte später noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte später noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor compruébelo más tarde.",FEED_TIMEOUT_MESSAGE:"Por favor inténtelo más tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualización.<br/>Vuelva a verificar más tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo más tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"Päivityksiä ei ole saatavilla.<br/>Tarkista myöhemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yritä myöhemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise à jour disponible.<br/>Veuillez vérifier ultérieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez réessayer ultérieurement."},he:{NO_CARDS_MESSAGE:".אין לנו עדכונים. בבקשה בדוק שוב בקרוב",FEED_TIMEOUT_MESSAGE:".בבקשה נסה שוב בקרוב"},hi:{NO_CARDS_MESSAGE:"हमारे पास कोई अपडेट नहीं हैं। कृपया बाद में फिर से जाँच करें.।",FEED_TIMEOUT_MESSAGE:"कृपया बाद में दोबारा प्रयास करें।."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare più tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare più tardi."},ja:{NO_CARDS_MESSAGE:"アップデートはありません。<br/>後でもう一度確認してください。",FEED_TIMEOUT_MESSAGE:"後でもう一度試してください。"},ko:{NO_CARDS_MESSAGE:"업데이트가 없습니다. 다음에 다시 확인해 주십시오.",FEED_TIMEOUT_MESSAGE:"나중에 다시 시도해 주십시오."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prøv igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Proszę sprawdzić ponownie później.",FEED_TIMEOUT_MESSAGE:"Proszę spróbować ponownie później."},pt:{NO_CARDS_MESSAGE:"Não temos atualizações.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"Não temos nenhuma atualização.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:"Обновления недоступны.<br/>Пожалуйста, проверьте снова позже.",FEED_TIMEOUT_MESSAGE:"Пожалуйста, повторите попытку позже."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>Försök igen senare.",FEED_TIMEOUT_MESSAGE:"Försök igen senare."},th:{NO_CARDS_MESSAGE:"เราไม่มีการอัพเดต กรุณาตรวจสอบภายหลัง.",FEED_TIMEOUT_MESSAGE:"กรุณาลองใหม่ภายหลัง."},uk:{NO_CARDS_MESSAGE:"Оновлення недоступні.<br/>ласка, перевірте знову пізніше.",FEED_TIMEOUT_MESSAGE:"Будь ласка, спробуйте ще раз пізніше."},vi:{NO_CARDS_MESSAGE:"Chúng tôi không có cập nhật nào.<br/>Vui lòng kiểm tra lại sau.",FEED_TIMEOUT_MESSAGE:"Vui lòng thử lại sau."},"zh-hk":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-hans":{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."},"zh-hant":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-tw":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},zh:{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."}};class pa{constructor(e,t){if(null!=e&&(e=e.toLowerCase()),null!=e&&null==ha[e]){const t=e.indexOf("-");t>0&&(e=e.substring(0,t))}if(null==ha[e]){const a="Braze does not yet have a localization for language "+e+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.";t?s.D.error(a):s.D.info(a),e="en"}this.language=e}get(e){return ha[this.language][e]}}const da={t:!1,i:null,m:()=>{if(da.o(),!da.i){let e=M.language,t=!1;Lt.nn(Bt.zn)&&(e=Lt.nn(Bt.zn),t=!0),da.i=new pa(e,t)}return da.i},o:()=>{da.t||(Lt.u(da),da.t=!0)},destroy:()=>{da.i=null,da.t=!1}};function ba(e){Lt.rr()&&Lt.removeSubscription(e)}function ma(e){e&&(e.className=e.className.replace("ab-show","ab-hide"),setTimeout((()=>{e&&e.parentNode&&e.parentNode.removeChild(e)}),Jt.Oi));const t=e.getAttribute("data-update-subscription-id");null!=t&&ba(t)}function ga(e,t){const a=document.createElement("div");if(a.className="ab-feed-body",a.setAttribute("aria-label","Feed"),a.setAttribute("role","feed"),null==e.lastUpdated){const e=document.createElement("div");e.className="ab-no-cards-message";const t=document.createElement("i");t.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",e.appendChild(t),a.appendChild(e)}else{let i=!1;const n=t=>{e.logCardClick(t)};for(const r of e.cards){const o=r instanceof E;!o||e.dr()?(a.appendChild(ua(r,n,t)),i=i||!o):s.D.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!i){const e=document.createElement("div");e.className="ab-no-cards-message",e.innerHTML=da.m().get("NO_CARDS_MESSAGE"),e.setAttribute("role","article"),a.appendChild(e)}}return a}function fa(e,t){if(null!=t){const a=[],i=t.querySelectorAll(".ab-card");e.do||(e.do={});for(let t=0;t<i.length;t++){const s=la(i[t]);if(e.do[s])continue;let n=ia(i[t]),r=na(i[t]);const o=n,l=r,c=Pe(i[t]),u=Me(i[t]);if(!n&&c&&(n=!0,sa(i[t])),!r&&u&&(r=!0,ra(i[t])),n&&r){if(c||u||oa(i[t]),o&&l)continue;for(const t of e.cards)if(t.id===s){e.do[t.id]=!0,a.push(t);break}}}a.length>0&&e.logCardImpressions(a)}}function va(e,t){t.setAttribute("aria-busy","true");const a=t.querySelectorAll(".ab-refresh-button")[0];null!=a&&(a.className+=" fa-spin");const i=(new Date).valueOf().toString();t.setAttribute("data-last-requested-refresh",i),setTimeout((()=>{if(t.getAttribute("data-last-requested-refresh")===i){const e=t.querySelectorAll(".fa-spin");for(let t=0;t<e.length;t++)e[t].className=e[t].className.replace(/fa-spin/g,"");const a=t.querySelectorAll(".ab-initial-spinner")[0];if(null!=a){const e=document.createElement("span");e.innerHTML=da.m().get("FEED_TIMEOUT_MESSAGE"),a.parentNode.appendChild(e),a.parentNode.removeChild(a)}"true"===t.getAttribute("aria-busy")&&t.setAttribute("aria-busy","false")}}),Jt.uo),e.sr()}function wa(e,t){const a=document.createElement("div");a.className="ab-feed ab-hide ab-effect-slide",a.setAttribute("role","dialog"),a.setAttribute("aria-label","Feed"),a.setAttribute("tabindex","-1");const i=document.createElement("div");i.className="ab-feed-buttons-wrapper",i.setAttribute("role","group"),a.appendChild(i);const s=document.createElement("i");s.className="fa fa-times ab-close-button",s.setAttribute("aria-label","Close Feed"),s.setAttribute("tabindex","0"),s.setAttribute("role","button");const n=e=>{ma(a),e.stopPropagation()};s.addEventListener("keydown",(e=>{e.keyCode!==qe&&e.keyCode!==Ge||n(e)})),s.onclick=n;const r=document.createElement("i");r.className="fa fa-refresh ab-refresh-button",null==e.lastUpdated&&(r.className+=" fa-spin"),r.setAttribute("aria-label","Refresh Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button");const o=t=>{va(e,a),t.stopPropagation()};return r.addEventListener("keydown",(e=>{e.keyCode!==qe&&e.keyCode!==Ge||o(e)})),r.onclick=o,i.appendChild(r),i.appendChild(s),a.appendChild(ga(e,t)),a.onscroll=()=>{fa(e,a)},a}function xa(e,t,a,i,n){if(!o(t))return;const r=[];for(const e of t)if(e instanceof y){if(e.url&&K.test(e.url)){if(X($(e.url))){s.D.error(F(L,"Content Card"));continue}}r.push(e)}if(e.cards=r,e.lastUpdated=a,null!=i)if(i.setAttribute("aria-busy","false"),null==e.lastUpdated)ma(i);else{const t=i.querySelectorAll(".ab-feed-body")[0];if(null!=t){const a=ga(e,n);t.parentNode.replaceChild(a,t),fa(e,a.parentNode)}}}function ya(e,t){t.setAttribute("data-update-subscription-id",e)}function ka(e){if(!Lt.rr())return;const t=document.querySelectorAll(".ab-feed");for(let a=0;a<t.length;a++)(null==e||null!=e&&t[a].parentNode===e)&&ma(t[a])}function Sa(e,t){if(!Lt.rr())return;ht();let a=!1;null==e&&(e=document.body,a=!0);const i=Lt.nn(Bt.tn)||Lt.nn(Bt.en)||!1;let n=ea.er().ys(!1);"function"==typeof t&&xa(n,t(n.cards.slice()),n.lastUpdated,null,i);const r=wa(n,i),o=ea.er();(null==n.lastUpdated||(new Date).valueOf()-n.lastUpdated.valueOf()>aa.ur)&&(null==o.Bt()||(new Date).valueOf()-o.Bt()>aa.ur)&&(s.D.info(`Cached content cards were older than max TTL of ${aa.ur} ms, requesting an update from the server.`),va(n,r),o.Ht((new Date).valueOf()));const l=(new Date).valueOf(),c=Aa((function(e){const a=r.querySelectorAll(".ab-refresh-button")[0];if(null!=a){let e=500;const t=parseInt(r.getAttribute("data-last-requested-refresh"));isNaN(t)?e-=(new Date).valueOf()-l:e-=(new Date).valueOf()-t,setTimeout((function(){a.className=a.className.replace(/fa-spin/g,"")}),Math.max(e,0))}let s=e.cards;"function"==typeof t&&(s=t(s.slice())),xa(n,s,e.lastUpdated,r,i)}));ya(c,r);const u=function(e){const t=e.querySelectorAll(".ab-feed");let i=null;for(let a=0;a<t.length;a++)t[a].parentNode===e&&(i=t[a]);null!=i?(ma(i),i.parentNode.replaceChild(r,i)):e.appendChild(r),setTimeout((function(){r.className=r.className.replace("ab-hide","ab-show")}),0),a&&r.focus(),fa(n,r),ca(n.cards,e)};var h;null!=e?u(e):window.onload=(h=window.onload,function(){"function"==typeof h&&h(),u(document.body)})}function Aa(e){if(!Lt.rr())return;const t=ea.er(),a=t.Ps(e);if(!t.Kt()){const e=Lt.mr().cr((()=>{t.Ts()}));t.Vt(e)}return a}var Ea={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"};function Da(e,t){if(!Lt.rr())return!1;if(null==e||e.length<=0)return s.D.error(`logCustomEvent requires a non-empty eventName, got "${e}". Ignoring event.`),!1;if(!ee(e,"log custom event","the event name"))return!1;const[a,i]=te(t,"logCustomEvent","eventProperties",`log custom event "${e}"`,"event");if(!a)return!1;if(Lt.ir().ge(e))return s.D.info(`Custom Event "${e}" is blocklisted, ignoring.`),!1;const n=Ft.G(s.A.CustomEvent,{n:e,p:i});if(n.S){s.D.info(`Logged custom event "${e}".`);for(const a of n.ve)Mt.er().je(st.be,[e,t],a)}return n.S}var Na=Object.freeze({__proto__:null,logCustomEvent:Da});function Ca(e,t,a,i,n){if(!Lt.rr())return!1;if(null==a&&(a="USD"),null==i&&(i=1),null==e||e.length<=0)return s.D.error(`logPurchase requires a non-empty productId, got "${e}", ignoring.`),!1;if(!ee(e,"log purchase","the purchase name"))return!1;let r=parseFloat(t);if(isNaN(r))return s.D.error(`logPurchase requires a numeric price, got ${t}, ignoring.`),!1;r=r.toFixed(2);const o=parseInt(i);if(isNaN(o))return s.D.error(`logPurchase requires an integer quantity, got ${i}, ignoring.`),!1;if(o<1||o>100)return s.D.error(`logPurchase requires a quantity >1 and <100, got ${o}, ignoring.`),!1;if(a=a.toUpperCase(),-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(a))return s.D.error(`logPurchase requires a valid currencyCode, got ${a}, ignoring.`),!1;const[l,c]=te(n,"logPurchase","purchaseProperties",`log purchase "${e}"`,"purchase");if(!l)return!1;if(Lt.ir().Dr(e))return s.D.info(`Purchase "${e}" is blocklisted, ignoring.`),!1;const u=Ft.G(s.A.Pr,{pid:e,c:a,p:r,q:o,pr:c});if(u.S){s.D.info(`Logged ${o} purchase${o>1?"s":""} of "${e}" for ${a} ${r}.`);for(const t of u.ve)Mt.er().je(st.Rr,[e,n],t)}return u.S}var _a=Object.freeze({__proto__:null,logPurchase:Ca});function Ta(e){Lt.rr()&&Lt.mr().requestImmediateDataFlush(e)}var Ia=Object.freeze({__proto__:null,requestImmediateDataFlush:Ta});class Oa extends oe{constructor(e,t){super(),this.h=e,this.Is=t,this.vt=new x,Lt.Ut(this.vt),this.zt()}zt(){const e=this.h.I(se.q.Ks)||[],t=[];for(let a=0;a<e.length;a++){const i=Zt(e[a]);null!=i&&t.push(i)}this.Xt=t,this.Os=f(this.h.I(se.q.Qs))}Vs(e){const t=[];let a=null;const i=this.h.I(se.q.P)||{},s={};for(let n=0;n<e.length;n++){a=e[n];const r=Vt(a);null!=r&&(i[r.id]&&(r.viewed=!0,s[r.id]=!0),t.push(r))}this.h.B(se.q.P,s),this.Xt=t,this.Ss(),this.Os=new Date,this.h.B(se.q.Qs,this.Os)}Ss(){const e=[];for(let t=0;t<this.Xt.length;t++)e.push(this.Xt[t].ss());this.h.B(se.q.Ks,e)}_s(e){null!=e&&e.feed&&(this.zt(),this.Vs(e.feed),this.vt.Nt(new Ma(this.Xt.slice(),this.Os)))}Ws(){this.zt();const e=[],t=new Date;for(let a=0;a<this.Xt.length;a++)(null==this.Xt[a].expiresAt||this.Xt[a].expiresAt>=t)&&e.push(this.Xt[a]);return new Ma(e,this.Os)}Ts(){this.Is.requestFeedRefresh()}Ps(e){return this.vt.Et(e)}clearData(e){null==e&&(e=!1),this.Xt=[],this.Os=null,e&&(this.h.$s(se.q.Ks),this.h.$s(se.q.Qs)),this.vt.Nt(new Ma(this.Xt.slice(),this.Os))}}const za={t:!1,provider:null,er:()=>(za.o(),za.provider||(za.provider=new Oa(Lt.l(),Lt.mr()),Lt.ar(za.provider)),za.provider),o:()=>{za.t||(Lt.u(za),za.t=!0)},destroy:()=>{za.provider=null,za.t=!1}};function Pa(){if(Lt.rr())return za.er().Ts()}class Ma extends Jt{constructor(e,t){super(e,t)}logCardImpressions(e){Wt(e,!1)}logCardClick(e){Xt(e,!1)}sr(){Pa()}dr(){return!1}}function Ua(){if(!Lt.rr())return;const e=document.querySelectorAll(".ab-feed");for(let t=0;t<e.length;t++)ma(e[t])}function Ra(){if(Lt.rr())return Lt.nr().yr(s.qr.Fr).S}function Ba(e,t,a){if(!Lt.rr())return;ht();const i=(e,t)=>{if(null==t)return e;const a=[];for(let e=0;e<t.length;e++)a.push(t[e].toLowerCase());const i=[];for(let t=0;t<e.length;t++){const s=[];for(let a=0;a<e[t].categories.length;a++)s.push(e[t].categories[a].toLowerCase());u(s,a).length>0&&i.push(e[t])}return i},n=Lt.nn(Bt.tn)||Lt.nn(Bt.en)||!1;let r=!1;null==e&&(e=document.body,r=!0);let o=!1,l=null;null==t?(l=za.er().Ws(),xa(l,i(l.cards,a),l.lastUpdated,null,n),o=!0):l=new Ma(i(t,a),new Date);const c=wa(l,n);if(o){(null==l.lastUpdated||(new Date).valueOf()-l.lastUpdated.valueOf()>Ma.ur)&&(s.D.info(`Cached feed was older than max TTL of ${Ma.ur} ms, requesting an update from the server.`),va(l,c));const e=(new Date).valueOf(),t=La((function(t){const s=c.querySelectorAll(".ab-refresh-button")[0];if(null!=s){let t=500;const a=parseInt(c.getAttribute("data-last-requested-refresh"));isNaN(a)?t-=(new Date).valueOf()-e:t-=(new Date).valueOf()-a,setTimeout((function(){s.className=s.className.replace(/fa-spin/g,"")}),Math.max(t,0))}xa(l,i(t.cards,a),t.lastUpdated,c,n)}));ya(t,c)}const h=e=>{const t=e.querySelectorAll(".ab-feed");let a=null;for(let i=0;i<t.length;i++)t[i].parentNode===e&&(a=t[i]);null!=a?(ma(a),a.parentNode.replaceChild(c,a)):e.appendChild(c),setTimeout((function(){c.className=c.className.replace("ab-hide","ab-show")}),0),r&&c.focus(),Ra(),fa(l,c),ca(l.cards,e)};var p;null!=e?h(e):window.onload=(p=window.onload,function(){"function"==typeof p&&p(),h(document.body)})}var qa=Object.freeze({__proto__:null,showFeed:Ba});function La(e){if(Lt.rr())return za.er().Ps(e)}class Ga{constructor(e,t,a,i,s,n,r,o,l,c){this.wi=e,this.yi=t,this.ji=a,this.xi=i+"/safari/"+t,this.zi=s||"/service-worker.js",this.Vi=n,this.wt=r,this.qi=o||!1,this.Yi=l||!1,this.h=c,this.Ji="serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,this.Ki="safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission}Qi(){return this.Yi}isPushSupported(){return this.Ji||this.Ki}isPushBlocked(){const e=this.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,t=this.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return e||t}isPushPermissionGranted(){return this.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission}Ue(){return!this.isPushBlocked()&&this.isPushSupported()&&!this.isPushPermissionGranted()}Xi(e,t,a,i,n){e.unsubscribe().then((e=>{e?this.Zi(t,a,i,n):(s.D.error("Failed to unsubscribe device from push."),"function"==typeof n&&n(!1))})).catch((e=>{s.D.error("Push unsubscription error: "+e),"function"==typeof n&&n(!1)}))}$i(e,t,a){const i=(e=>{if("string"==typeof e)return e;if(0!==e.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return e.endpoint;let t=e.endpoint;return e.hn&&-1===e.endpoint.indexOf(e.hn)&&(t=e.endpoint+"/"+e.hn),t})(e);let s=null,n=null;if(null!=e.getKey)try{s=btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("p256dh")))),n=btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("auth"))))}catch(e){if("invalid arguments"!==e.message)throw e}const r=(e=>{let t;return e.options&&(t=e.options.applicationServerKey)&&t.byteLength&&t.byteLength>0?btoa(String.fromCharCode.apply(null,new Uint8Array(t))).replace(/\+/g,"-").replace(/\//g,"_"):null})(e);this.wi.dn(i,a,s,n,r),i&&"function"==typeof t&&t(i,s,n)}fn(){this.wi.pn(!0)}wn(e,t){this.wi.pn(!1),s.D.info(e),"function"==typeof t&&t(!1)}bn(e,t,a,i){if("default"===t.permission)try{window.safari.pushNotification.requestPermission(this.xi,e,{api_key:this.yi,device_id:this.ji.te().id},(t=>{"granted"===t.permission&&this.wi.setPushNotificationSubscriptionType(ie.NotificationSubscriptionTypes.OPTED_IN),this.bn(e,t,a,i)}))}catch(e){this.wn("Could not request permission for push: "+e,i)}else"denied"===t.permission?this.wn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",i):"granted"===t.permission&&(s.D.info("Device successfully subscribed to push."),this.$i(t.deviceToken,a,new Date))}gn(e,t,a){const i=i=>{switch(i){case"granted":return void("function"==typeof e&&e());case"default":return void("function"==typeof t&&t());case"denied":return void("function"==typeof a&&a());default:s.D.error("Received unexpected permission result "+i)}};let n=!1;const r=window.Notification.requestPermission((e=>{n&&i(e)}));r?r.then((e=>{i(e)})):n=!0}Zi(e,t,a,i){const n={userVisibleOnly:!0};null!=t&&(n.applicationServerKey=t),e.pushManager.subscribe(n).then((e=>{s.D.info("Device successfully subscribed to push."),this.$i(e,a,new Date)})).catch((e=>{this.isPushBlocked()?(s.D.info("Permission for push notifications was denied."),"function"==typeof i&&i(!1)):s.D.error("Push subscription failed: "+e)}))}yn(){return this.qi?navigator.serviceWorker.getRegistration():navigator.serviceWorker.register(this.zi).then((()=>navigator.serviceWorker.ready.then((e=>(e&&"function"==typeof e.update&&e.update().catch((e=>{s.D.info("ServiceWorker update failed: "+e)})),e)))))}vn(e){this.qi||(e.unregister(),s.D.info("Service worker successfully unregistered."))}subscribe(e,t){if(this.isPushSupported()){if(this.Ji){if(!this.qi&&null!=window.location){let e=this.zi;-1===e.indexOf(window.location.host)&&(e=window.location.host+e),-1===e.indexOf(window.location.protocol)&&(e=window.location.protocol+"//"+e);const t=e.substr(0,e.lastIndexOf("/")+1);if(0!==wt.Pn().indexOf(t))return void s.D.error("Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from "+window.location.pathname+" but service worker is at "+e+")")}if(this.isPushBlocked())return void this.wn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",t);if(this.wt&&!this.wt.kn()&&0===this.wt.Gs())return s.D.info("Waiting for VAPID key from server config before subscribing to push."),void this.wt.Sn((()=>{this.subscribe(e,t)}));const a=()=>{s.D.info("Permission for push notifications was denied."),"function"==typeof t&&t(!1)},i=()=>{let e="Permission for push notifications was ignored.";this.isPushBlocked()&&(e+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),s.D.info(e),"function"==typeof t&&t(!0)},n=this.isPushPermissionGranted(),r=()=>{n||this.wi.setPushNotificationSubscriptionType(ie.NotificationSubscriptionTypes.OPTED_IN),this.yn().then((a=>{if(null==a)return s.D.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof t&&t());a.pushManager.getSubscription().then((i=>{let n=null;if(this.wt&&null!=this.wt.kn()&&(n=s._n.Dn(this.wt.kn())),i){let r=null,l=null;const c=this.h.I(se.q.Nn);if(c&&!o(c)){let e;try{e=Ut.An(c).Wn}catch(t){e=null}null==e||isNaN(e.getTime())||0===e.getTime()||(r=e,l=new Date(r),l.setMonth(r.getMonth()+6))}null!=n&&i.options&&i.options.applicationServerKey&&i.options.applicationServerKey.byteLength&&i.options.applicationServerKey.byteLength>0&&!p(n,new Uint8Array(i.options.applicationServerKey))?(i.options.applicationServerKey.byteLength>12?s.D.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):s.D.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.Xi(i,a,n,e,t)):i.expirationTime&&new Date(i.expirationTime)<=(new Date).valueOf()?(s.D.info("Push subscription is expired, creating new subscription."),this.Xi(i,a,n,e,t)):c&&o(c)?this.Xi(i,a,n,e,t):null==l?(s.D.info("No push subscription creation date found, creating new subscription."),this.Xi(i,a,n,e,t)):l<=(new Date).valueOf()?(s.D.info("Push subscription older than 6 months, creating new subscription."),this.Xi(i,a,n,e,t)):(s.D.info("Device already subscribed to push, sending existing subscription to backend."),this.$i(i,e,r))}else this.Zi(a,n,e,t)})).catch((e=>{s.D.error("Error checking current push subscriptions: "+e)}))})).catch((e=>{s.D.error("ServiceWorker registration failed: "+e)}))};this.gn(r,i,a)}else if(this.Ki){if(null==this.Vi||""===this.Vi)return void s.D.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari");const a=window.safari.pushNotification.permission(this.Vi);this.bn(this.Vi,a,e,t)}}else s.D.info(this.jn)}unsubscribe(e,t){this.isPushSupported()?this.Ji?navigator.serviceWorker.getRegistration().then((a=>{a&&a.pushManager.getSubscription().then((i=>{i&&(this.fn(),i.unsubscribe().then((i=>{i?(s.D.info("Device successfully unsubscribed from push."),"function"==typeof e&&e()):(s.D.error("Failed to unsubscribe device from push."),"function"==typeof t&&t()),this.vn(a)})).catch((e=>{s.D.error("Push unsubscription error: "+e),"function"==typeof t&&t()})))})).catch((e=>{s.D.error("Error unsubscribing from push: "+e),"function"==typeof t&&t()}))})):this.Ki&&(this.fn(),s.D.info("Device unsubscribed from push."),"function"==typeof e&&e()):s.D.info(this.jn)}}Ga.jn="Push notifications are not supported in this browser.";const Fa={t:!1,pushManager:null,Br:()=>(Fa.o(),Fa.pushManager||(Fa.pushManager=new Ga(Lt.gr(),Lt.aa(),Lt.ce(),Lt.Js(),Lt.nn(Bt.ea),Lt.nn(Bt.na),Lt.ir(),Lt.nn(Bt.ra),Lt.nn(Bt.ta),Lt.l())),Fa.pushManager),o:()=>{Fa.t||(Lt.u(Fa),Fa.t=!0)},destroy:()=>{Fa.pushManager=null,Fa.t=!1}};var $a=Object.freeze({__proto__:null,default:Fa});function ja(e,t){if(Lt.rr())return Fa.Br().subscribe(((t,a,i)=>{Lt.mr().requestImmediateDataFlush(),"function"==typeof e&&e(t,a,i)}),t)}var Xa=Object.freeze({__proto__:null,requestPushPermission:ja});function Ha(e,t){if(Lt.rr())return Fa.Br().unsubscribe(e,t)}var Wa=Object.freeze({__proto__:null,unregisterPush:Ha}),Ja=Object.freeze({__proto__:null,WindowUtils:wt,logCardClick:Xt,logCardDismissal:Ht,logCardImpressions:Wt,Card:y,Banner:k,CaptionedImage:S,ClassicCard:A,ControlCard:E,ContentCards:aa,getCachedContentCards:function(){if(Lt.rr())return ea.er().ys(!1)},hideContentCards:ka,logContentCardsDisplayed:function(){if(Lt.rr())return he("logContentCardsDisplayed","method"),!0},requestContentCardsRefresh:ta,showContentCards:Sa,subscribeToContentCardsUpdates:Aa,toggleContentCards:function(e,t){Lt.rr()&&(document.querySelectorAll(".ab-feed").length>0?ka():Sa(e,t))},addSdkMetadata:function(e){if(Lt.rr()){if(!o(e))return s.D.error("Cannot set SDK metadata because metadata is not an array."),!1;for(const t of e)if(!r(Ea,t,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return Lt.nr().addSdkMetadata(e),!0}},changeUser:function(e,t){return!!Lt.rr()&&(null==e||0===e.length||e!=e?(s.D.error("changeUser requires a non-empty userId."),!1):B(e)>ie.ee?(s.D.error(`Rejected user id "${e}" because it is longer than ${ie.ee} bytes.`),!1):!(null!=t&&!Q(t,"set signature for new user","signature"))&&void Lt.mr().changeUser(e.toString(),Lt.re(),t))},destroy:function(){s.D.info("Destroying Braze instance"),Lt.destroy(!0)},BrazeSdkMetadata:Ea,DeviceProperties:le,disableSDK:function(){null!=Lt.mr()&&Lt.mr().requestImmediateDataFlush();const e=new ne.ne(null,!0);e.store(se.ae,"This-cookie-will-expire-in-"+e.ie());const t=s.Ft.xt;new s.qt(t,s.D).setItem(t.Pt.oe,t.se,!0),Lt.destroy(!1),Lt.le(!0)},enableSDK:function(){new ne.ne(null,!0).remove(se.ae);const e=s.Ft.xt;new s.qt(e,s.D).br(e.Pt.oe,e.se),Lt.destroy(!1),Lt.le(!1)},getDeviceId:function(e){Lt.rr()&&(null==e&&s.D.error("getDeviceId must be supplied with a callback. e.g., braze.getDeviceId(function(deviceId) {console.log('the device id is ' + deviceId)})"),"function"==typeof e&&e(Lt.ce().te().id))},getUser:xt,initialize:function(e,t){return Lt.initialize(e,t)},isDisabled:function(){return!!new ne.ne(null,!0).lr(se.ae)},logCustomEvent:Da,logPurchase:Ca,openSession:function(){if(!Lt.rr())return;Lt.mr().openSession();const e=s.Ft.xt,t=new s.qt(e,s.D);t.hr(e.Pt.jr,(function(a,i){const n=i.lastClick,r=i.trackingString;s.D.info(`Firing push click trigger from ${r} push click at ${n}`);const o=Lt.mr().kr(n,r),l=function(){Mt.er().je(st.vr,[r],o)};Lt.mr().zr(l,l),t.br(e.Pt.jr,a)})),t.Jt(e.Pt.$r,(function(e){Lt.mr().wr(e)}))},removeAllSubscriptions:function(){Lt.rr()&&Lt.removeAllSubscriptions()},removeSubscription:ba,requestImmediateDataFlush:Ta,setLogger:function(e){s.D.setLogger(e)},setSdkAuthenticationSignature:function(e){return!(!Lt.rr()||""===e||!Q(e,"set signature","signature",!1)||(Lt.ti().setSdkAuthenticationSignature(e),0))},subscribeToSdkAuthenticationFailures:function(e){if(Lt.rr())return Lt.ti().subscribeToSdkAuthenticationFailures(e)},toggleLogging:function(){s.D.toggleLogging()},wipeData:function(){if(null==Lt.l())throw new Error("Braze must be initialized before calling methods.");Lt.l().clearData();const e=h(s.Ft);for(let t=0;t<e.length;t++){const a=e[t],i=s.Ft[a];new s.qt(i,s.D).clearData()}if(Lt.rr())for(const e of Lt.re())e.clearData(!0)},handleBrazeAction:function(e,t){yt(e,t)},Feed:Ma,getCachedFeed:function(){if(Lt.rr())return za.er().Ws()},destroyFeed:Ua,logFeedDisplayed:Ra,requestFeedRefresh:Pa,showFeed:Ba,subscribeToFeedUpdates:La,toggleFeed:function(e,t,a){Lt.rr()&&(document.querySelectorAll(".ab-feed").length>0?Ua():Ba(e,t,a))},InAppMessage:$e,InAppMessageButton:Xe,ControlMessage:De,FullScreenMessage:He,HtmlMessage:je,ModalMessage:We,SlideUpMessage:Je,automaticallyShowInAppMessages:function(){if(!Lt.rr())return;dt();const e=lt.m();if(null==e.Se()){const t=Ot((e=>It(e)));e.Ee(t)}return e.Se()},logInAppMessageButtonClick:Et,logInAppMessageClick:gt,logInAppMessageHtmlClick:kt,logInAppMessageImpression:Tt,showInAppMessage:It,subscribeToInAppMessage:Ot,isPushBlocked:function(){if(Lt.rr())return Fa.Br().isPushBlocked()},isPushPermissionGranted:function(){if(Lt.rr())return Fa.Br().isPushPermissionGranted()},isPushSupported:function(){if(Lt.rr())return Fa.Br().isPushSupported()},requestPushPermission:ja,unregisterPush:Ha,User:ie});console.log(Ja);
